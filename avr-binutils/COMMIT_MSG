cross/avr-binutils: Update to 2.42

Add pkgsrc patch for binutils testsuite.

Changelog
=========

2024-01-15  Nick Clifton  <nickc@redhat.com>

    * 2.42 branch point.

2023-12-04  Tom Tromey  <tom@tromey.com>

    * dwarf.c (display_debug_names): Handle empty .debug_names hash
    table.  Name entries start at 1.

2023-11-15  Arsen ArsenoviÄ\u2021  <arsen@aarsen.me>

    * aclocal.m4: Regenerate.
    * configure: Regenerate.
    * po/Make-in ($(srcdir)/$(PACKAGE).pot): Output to a .pot
    temporary file, to suppress xgettext checking charset names.

2023-11-14  Nick Clifton  <nickc@redhat.com>

    PR 31062
    * objdump.c (decompressed_dumps): New local variable.
    (usage): Mention the -z/--decompress option.
    (long_options): Add --decompress.
    (dump_section_header): Add "COMPRESSED" to the Flags field of any
    compressed section.
    (dump_section): Warn users when dumping a compressed section.
    (display_any_bfd): Decompress the section if decompressed_dumps is
    true.
    (main): Handle the -z/--decompress option.
    * NEWS: Mention the new feature.
    * doc/binutils.texi: Document the new feature.
    * testsuite/binutils-all/objdump.s: Update expected output.
    * testsuite/binutils-all/objdump.exp: Add test of -Z -s.
    * testsuite/binutils-all/objdump.Zs: New file.

    * readelf.c (maybe_expand_or_relocate_section): New function.
    Contains common code found in dump functions.  Adds a note message
    if a compressed section is not being decompressed.
    (dump_section_as_strings): Use new function.
    (dump_section_as_bytes): Likewise.

2023-11-10  Simon Marchi  <simon.marchi@efficios.com>

    * readelf.c (decode_AMDGPU_machine_flags): Handle gfx1100,
    gfx1101, gfx1102.

2023-11-10  Vsevolod Alekseyev  <sevaa@sprynet.com>

    PR 30880
    * dwarf.c (read_and_display_attr_value): Fix loclist handling.
    (display_loclists_list): Likewise.

2023-10-24  Tom de Vries  <tdevries@suse.de>

    * dwarf.c (display_gdb_index): Handle unknown name of main.

2023-10-10  Tom de Vries  <tdevries@suse.de>

    * dwarf.c (display_lang): New function, factored out of ...
    (read_and_display_attr_value): ... here.
    (display_gdb_index): Handle v9 .gdb_index.

2023-10-05  A. Wilcox  <awilfox@adelielinux.org>w

    PR 30916
    * testsuite/binutils-all/addr2line.exp: Do not use PowerPC
    specific options when working with a MUSL target.

2023-10-02  Vsevolod Alekseyev  <sevaa@sprynet.com>

    PR 29267
    * dwarf.c (fetch_indexed_value): Delete.
    (fetch_indexed_offset): Correct base address calculation.
    (read_and_display_attr_value): Replace uses of fetch_indexed_value
    with fetch_indexed_offset.

2023-09-28  Frederic Cambus  <fred@statdns.com>

    * readelf.c (get_segment_type): Handle PT_OPENBSD_NOBTCFI segment
    type.

2023-09-26  Nick Clifton  <nickc@redhat.com>

    * testsuite/binutils-all/ar.exp: Remove assumption of the setting
    of umask when creating test archive files.

2023-09-25  Vsevolod Alekseyev  <sevaa@sprynet.com>

    PR 30792
    * dwarf.h (struct debug_info): Remove range_versions field.
    * dwarf.c (fetch_indexed_offset): New function.
    (read_and_display_attr_value): Use it for DW_FORM_rnglistx.
    Remove code to initialise range_versions.
    (skip_attribute): New function.
    (read_bases): Read and reccord all range and address bases in a CU.
    (process_debug_info): Call read_bases.
    (display_debug_rnglists): Rename to display_debug_rnglists_unit_header
    and only display the range list header information.
    (display_debug_ranges): Adjust.

2023-09-05  Nick Clifton  <nickc@redhat.com>

    PR 30684
    * readelf.c (extra_sym_info): New variable.
    (section_name_valid): Also check for filedata being NULL.
    (section_name_print): Delete.
    (section_index_real): New function.  Returns true if the given
    section index references a real section.
    (print_symbol): Rename to print_sumbol_name.
    (printable_section_name): Use a rotating array of static buffers
    for the return string.
    (printable_section_name_from_index): Merge code from
    dump_relocations and get_symbol_index_type into here.
    (long_option_values): Add OPTION_NO_EXTRA_SYM_INFO.
    (options): Add "extra-sym-info" and "no-extra-sym-info".
    (usage): Mention new options.
    (parse_args): Parse new options.
    (get_symbol_index_type): Delete.
    (print_dynamic_symbol_size): Rename to print_symbol_size.
    (print_dynamic_symbol): Rename to print_symbol.
    (print_symbol_table_heading): New function.
    (process_symbol_table): Use new function.
    * doc/binutils.texi: Document the new option.
    * NEWS: Mention the new feature.

2023-08-23  Nick Clifton  <nickc@redhat.com>

    PR 30781
    * dwarf.h (debug_info): Add range_versions field.
    * dwarf.c (read_and_display_attr_value): When recording a range
    arribute also ecord the dwarf version number.
    (is_range_list_for_this_section): New function.
    (display_debug_ranges): Only show debug ranges whose version is
    suitable for the secction being displayed.

2023-07-30  Jose E. Marchesi  <jose.marchesi@oracle.com>

    * readelf.c (get_machine_flags): Recognize and pretty print BPF
    machine flags.

2023-07-24  Johannes Schauer Marin Rodrigues  <josch@debian.org>

    * doc/binutils.texi (objcopy): Document change in behaviour of
    objcopy's --preserve-dates command line option.

2023-07-09  Fangrui Song  <maskray@google.com>

    PR 30592
    * NEWS: Mention the new feature for objcopy.
    * doc/binutils.texi: Mention "large".
    * objcopy.c (parse_flags): Parse "large".
    (check_new_section_flags): Error if "large" is used with a
    non-x86-64 ELF target.
    * testsuite/binutils-all/x86-64/large-sections.d: New.
    * testsuite/binutils-all/x86-64/large-sections.s: New.
    * testsuite/binutils-all/x86-64/large-sections-i386.d: New.
    * testsuite/binutils-all/x86-64/large-sections-2.d: New.
    * testsuite/binutils-all/x86-64/large-sections-2-x32.d: New.

2023-07-03  Nick Clifton  <nickc@redhat.com>

    * README-how-to-make-a-release: Change some version numbers.
    * configure: Regenerate.
    * po/binutils.pot: Regenerate.

2023-07-03  Nick Clifton  <nickc@redhat.com>

    2.41 Branch Point.

2023-06-30  Nick Clifton  <nickc@redhat.com>

    PR 30598
    * strings.c (set_string_min): New function.
    (main): Use it.
    (print_unicode_stream): Calculate buffer size using a size_t.

2023-06-30  Nick Clifton  <nickc@redhat.com>

    PR 30595
    * strings.c (main): Check for an excessively large minimum string
    length.

2023-06-21  Nick Clifton  <nickc@redhat.com>

    * testsuite/lib/binutils-common.exp (prune_warnings_extra): Prune
    warnings about -z execstack creating an executable stack.

2023-05-30  Nick Clifton  <nickc@redhat.com>

    * od-pe.c (targ_info): New array.
    (get_target_specific_info): New function
    (decode_machine_number): Retire.  Use get_target_specific_info
    instead.
    (is_pe_object_magic): Likewise.
    (dump_pe_file_header): Display more information.
    Rework layout to be similar to that from 'objdump -p'.
    Add code to handle larger than normnal AOUT headers.

2023-05-30  Nick Clifton  <nickc@redhat.com>

    * od-pe.c (decode_machine_number): Add ARMMAGIC value of 0xa00.
    (is_pe_object_magic): Likewise.

2023-05-26  Nick Clifton  <nickc@redhat.com>

    * od-pe.c: New file: Dumps fields in PE format headers.
    * configure.ac (od_vectors): Add objdump_private_desc_pe for PE
    format targets.
    (od_files): Add od-pe for PE format targets.
    * configure: Regenerate.
    * Makefile.am (CFILES): Add od-pe.c
    (EXTRA_objdump_SOURCE): Likewise.
    * Makefile.in: Generate.
    * NEWS: Mention the new feature.
    * doc/binutils.texi: Document the new support.
    * objdump.c (wide_output): Change from local to global.
    * objdump.h (wide_output): Prototype.
    (objdump_private_desc_pe): Prototype.
    * testsuite/binutils-all/objdump.exp: Add a test of the new feature.

2023-05-09  Enze Li  <enze.li@gmx.com>

    * README:  Correct a typo.

2023-05-02  Nick Clifton  <nickc@redhat.com>

    * MAINTAINERS: Remove Dimity Diky as MSP430 maintainer.

2023-04-20  Nick Clifton  <nickc@redhat.com>

    * SECURITY.txt: New file.

2023-04-19  Nick Clifton  <nickc@redhat.com>

    PR 30355
    * dwarf.c (read_and_display_attr_value): Correctly handle
    DW_loclistx attributes that index a version 5 .debug_loclists
    section.

2023-04-17  Nick Clifton  <nickc@redhat.com>

    PR 30142
    * rescoff.c (write_coff_file): Add the SEC_READONLY flag to the
    .rsrc section.

2023-04-11  Nick Clifton  <nickc@redhat.com>

    PR 30327
    * dwarf.c (read_and_display_attr_value): Warn if the number of
    views is greater than the number of locations.

    PR 30313
    * dwarf.c (display_debug_lines_decoded): Check for an overlarge
    number of files or directories.

    PR 30312
    * dwarf.c (prealloc_cu_tu_list): Always allocate at least one
    entry.

    PR 30311
    * readelf.c (uncompress_section_contents): Check for a
    suspiciously large uncompressed size.

2023-03-30  Nick Clifton  <nickc@redhat.com>

    PR 30284
    * dwarf.c (read_and_display_attr_value): Detect and ignore
    negative base values.

2023-03-23  Frederic Cambus  <fred@statdns.com>

    * readelf.c (get_segment_type): Handle PT_OPENBSD_MUTABLE segment
    type.

2023-03-14  Nick Clifton  <nickc@redhat.com>

    PR 30227
    * dwarf.c (process_cu_tu_index): Prevent excessive memory
    allocation when nused is large and ncols is zero.

2023-02-09  Tom Tromey  <tromey@adacore.com>

    * dwarf-mode.el: Bump version to 1.8.
    (dwarf-insert-substructure): Tighten regexp.
    (dwarf-refresh-all): New defun.
    (dwarf-mode-map): Bind "A" to dwarf-refresh-all.
    (dwarf-mode): Remove old FIXME.

2023-02-07  Nick Clifton  <nickc@redhat.com>

    PR 30080
    * doc/binutils.texi (nm): Update description of the 'n' symbol
    type.

2023-01-31  Nick Clifton  <nickc@redhat.com>

    * po/sv.po: Updated Swedish translation.

2023-01-23  Nick Clifton  <nickc@redhat.com>

    * po/sv.po: Updated Swedish translation.

2023-01-18  Nick Clifton  <nickc@redhat.com>

    PR 29993
    * objcopy.c (merge_gnu_build_notes): Remember the last non-deleted
    note in order to speed up the scan for matching notes.

2023-01-16  Nick Clifton  <nickc@redhat.com>

    * po/sv.po: Updated Swedish translation.

2023-01-09  Nick Clifton  <nickc@redhat.com>

    * po/bg.po: Updated Bulgarian translation.
    * po/ro.po: Updated Romainian translation.

2023-01-05  Nick Clifton  <nickc@redhat.com>

    * MAINTAINERS: Remove Stephen Casner as the PDP11 maintainer.

2023-01-03  Nick Clifton  <nickc@redhat.com>

    * po/fr.po: Updated French translation.
    * po/uk.po: Updated Ukrainian translation.

2023-01-03  Luis Machado  <luis.machado@arm.com>

    * readelf.c (get_note_type): Add support for NT_ARM_SSVE and
    NT_ARM_ZA note types.

2022-12-31  Nick Clifton  <nickc@redhat.com>

    * 2.40 branch created.

2022-12-31  Nick Clifton  <nickc@redhat.com>

    * po/ro.po: Updated Romanian translation.

2022-12-21  Nick Clifton  <nickc@redhat.com>

    PR  29924
    * objdump.c (load_specific_debug_section): Check for excessively
    large sections.

2022-12-19  Tom Tromey  <tromey@adacore.com>

    * dwarf-mode.el (dwarf-do-refresh): Avoid compiler warning.

2022-12-19  Nick Clifton  <nickc@redhat.com>

    PR 29914
    * dwarf.c (fetch_indexed_value): Fail if the section is not big
    enough to contain a header size field.
    (display_debug_addr): Fail if the computed address size is too big
    or too small.

2022-12-16  Nick Clifton  <nickc@redhat.com>

    PR 29908
    * dwarf.c (display_debug_addr): Check for corrupt header lengths.

2022-12-01  Nick Clifton  <nickc@redhat.com>

    PR 25202
    * objcopy.c (copy_object): Set VerilogDataEndianness to the
    endianness of the input file.
    (copy_main): Verifiy the value set by the --verilog-data-width
    option.
    * testsuite/binutils-all/objcopy.exp: Add tests of the new behaviour.
    * testsuite/binutils-all/verilog-I4.hex: New file.

2022-11-21  Nick Clifton  <nickc@redhat.com>

    PR 29764
    * doc/binutils.texi (objdump): Note that the -m option supports
    the <architecture>:<machine> syntax.

2022-11-04  Nick Clifton  <nickc@redhat.com>

    * README-how-to-make-a-release: Add instructions for uploading the
    gprofng documentation.

2022-10-31  Nick Clifton  <nickc@redhat.com>

    PR 29457
    * configure.ac: Add --enable-colored-disassembly.
    * objdump.c: Add --disassembler-color=terminal.
    * doc/binutils.texi (objdump): Document the new option.
    * NEWS: Mention new feature.
    * config.in: Regenerate in.
    * configure: Regenerate.

2022-10-19  Nick Clifton  <nickc@redhat.com>

    * MAINTAINERS: Add section on patches, copyright and DCO.

2022-10-12  Nick Clifton  <nickc@redhat.com>

    PR 29665
    * objcopy.c (copy_object): Use the input filename when
    reporting that a .gnu_debuglink section already exists.

2022-10-03  Nick Clifton  <nickc@redhat.com>

    * readelf.c (get_32bit_section_headers): Return false if the
    e_shoff field is zero.
    (get_64bit_section_headers): Likewise.

2022-09-28  Nick Clifton  <nickc@redhat.com>

    PR 29628
    * size.c (usage): Add -f.
    * doc/binutils.texi (size): Add -f.

2022-09-20  Nick Clifton  <nickc@redhat.com>

    * objcopy.c (copy_object): Do not issue a warning message when
    encountering empty .gnu.build.attribute sections.

2022-09-14  Rupesh Potharla  <Rupesh.Potharla@amd.com>

    * testsuite/binutils-all/readelf.exp (readelf_wi_test): Extend
    regexps to allow for output genreated by the Clang compiler.

2022-09-12  Aaron Merey  <amerey@redhat.com>

    * objcopy.c (might_need_separate_debug_info): Add with_source_code to
    the options that cause this function to return true.
    (main.c): Add with_source_code to the options that enable
    dump_any_debugging.

2022-09-09  Nick Clifton  <nickc@redhat.com>

    PR 29532
    * objcopy.c (setup_section): Leave group sections intact when
    creating separate debuginfo files.

2022-09-08  Nick Clifton  <nickc@redhat.com>

    PR 29523
    * dwarf.c (display_debug_lines_decoded): Correctly handle DWARF-5
    directory and filename tables.

2022-09-02  Aaron Merey  <amerey@redhat.com>

    PR 29075
    * objdump.c (find_separate_debug): New function. Finds the bfd
    corresponding to the separate debuginfod of a given bfd.
    (find_alt_debug): New function. Finds the bfd corresponding to the
    .gnu_debugaltlink of a given bfd.
    (slurp_file): Add bfd parameter. If a source file cannot be found
    attempt to download it from debuginfod, if enabled.
    (try_print_file_open): Add bfd parameter and pass it to slurp_file.
    (show_line): If debuginfod is enabled, call
    bfd_find_nearest_line_with_alt instead of bfd_find_nearest_line.

2022-09-01  Nick Clifton  <nickc@redhat.com>

    PR 29534
    * dllwrap.c: Replace uses of choose_temp_base() with
    make_temp_file().
    * dlltool.c: Likewise.
    * resrc.c: Likewise.

2022-08-23  Nick Clifton  <nickc@redhat.com>

    PR 29489
    * dlltool.c (deterministic): New variable.
    (gen_lib_file): If deterministic is true set the
    BFD_DETERMINISTIC_OUTPUT flag.
    (usage): Mention --deterministic-libraries and
    --non-deterministic-libraries.
    (long_options): Add new options.
    (main): Parse new options.
    * doc/binutils.texi: Document the new options.
    * NEWS: Mention the new feature.

2022-08-22  Nick Clifton  <nickc@redhat.com>

    * readelf.c (check_magic_number): New function.  Checks the magic
    bytes at the start of a file.  If they are not the ELF format
    magic values, then attempts to generate a helpful error message.
    (process_file_header): Call check_magic_number.

2022-08-09  Nick Clifton  <nickc@redhat.com>

    PR 29457
    * objdump.c (disassembler_color): Change type to an enum.
    (disassembler_extended_color): Remove.
    (usage): Update.
    (objdump_color_for_assembler_style): Update.
    (main): Update initialisation of disassembler_color.  If not
    initialised via a command line option, set based upon terminal
    output.
    * doc/binutils.texi: Update description of disassmbler-color
    option.
    * testsuite/binutils-all/arc/objdump.exp: Add
    --disassembler-color=off option when disassembling.
    * testsuite/binutils-all/arm/objdump.exp: Likewise.

2022-08-08  Nick Clifton  <nickc@redhat.com>

    * README-how-to-make-a-release: Add a link to the NEWS files in
    the release announcement email.

2022-07-08  Nick Clifton  <nickc@redhat.com>

    * 2.39 branch created.

2022-07-01  Nick Clifton  <nickc@redhat.com>

    * dwarf.c (display_debug_rnglists): Add newline at end of listing.

2022-06-30  Nick Clifton  <nickc@redhat.com>

    * dwarf.c (dwarf_select_sections_by_name): If the entry's value is
    zero then clear the corresponding variable.
    (dwarf_select_sections_by_letters): Likewise.
    * testsuite/binutils-all/debuginfo.exp: Expect -WE and -wE
    debuginfod tests to fail.

2022-06-28  Nick Clifton  <nickc@redhat.com>

    PR 29267
    * dwarf.c (display_debug_rnglists): New function, broken out of..
    (display_debug_ranges): ... here.
    (read_and_display_attr_value): Correct calculation of index
    displayed for DW_FORM_loclistx and DW_FORM_rnglistx.
    * testsuite/binutils-all/x86-64/pr26808.dump: Update expected
    output.

2022-06-27  Nick Clifton  <nickc@redhat.com>

    PR 29289
    * dwarf.c (display_debug_names): Replace assert with a warning
    message.

2022-06-27  Nick Clifton  <nickc@redhat.com>

    PR 29290
    * dwarf.c (read_and_display_attr_value): Check that debug_info_p
    is set before dereferencing it.

2022-06-27  Nick Clifton  <nickc@redhat.com>

    * dwarf.c (fetch_indexed_string): Do not use length of first table
    in string section as the length of every table in the section.

    * testsuite/binutils-all/pr26112.r: Update expected output.

2022-06-22  Kumar N, Bhuvanendra  <Kavitha.Natarajan@amd.com>

    * dwarf.c (fetch_indexed_string): Added new parameter
    str_offsets_base to calculate the string offset.
    (read_and_display_attr_value): Read DW_AT_str_offsets_base
    attribute.
    (process_debug_info): While allocating memory and initializing
    debug_information, do it for do_debug_info also, if its true.
    (load_separate_debug_files): Load .debug_str_offsets if exists.
    * dwarf.h (struct debug_info): Add str_offsets_base field.

2022-06-22  Marcus Nilsson <brainbomb@gmail.com>

    * readelf.c: (slurp_relr_relocs) Use malloc instead of xmalloc
        when allocating space for relocations.

2022-06-21  Kumar N, Bhuvanendra  <Kavitha.Natarajan@amd.com>

    * dwarf.h (struct debug_info): Add rnglists_base field.
    * dwarf.c (read_and_display_attr_value): Read attribute DW_AT_rnglists_base.
    (display_debug_rnglists_list): While handling DW_RLE_base_addressx,
    DW_RLE_startx_endx, DW_RLE_startx_length items, pass the proper parameter
    value to fetch_indexed_addr(), i.e. fetch the proper entry in .debug_addr section.
    (display_debug_ranges): Add rnglists_base to the .debug_rnglists base address.
    (load_separate_debug_files): Load .debug_addr section, if exists.

2022-05-20  Nick Clifton  <nickc@redhat.com>

    * dwarf.c (dwarf_select_sections_by_names): Return zero if no
    sections were selected.
    (dwarf_select_sections_by_letters): Likewise.
    * dwarf.h: (dwarf_select_sections_by_names): Update prototype.
    (dwarf_select_sections_by_letters): Update prototype.
    * objdump.c (might_need_separate_debug_info): New function.
    (dump_bfd): Call new function before attempting to load separate
    debug info files.
    (main): Do not enable dwarf section dumping for -WK or -WN.
    * readelf.c (parse_args): Do not enable dwarf section dumping for
    -wK or -wN.
    (might_need_separate_debug_info): New function.
    (process_object): Call new function before attempting to load
    separate debug info files.
    * testsuite/binutils-all/debuginfo.exp: Expect -WE and -wE
    debuginfod tests to pass.
    * testsuite/binutils-all/objdump.Wk: Add extra regexps.
    * testsuite/binutils-all/readelf.k: Add extra regexps.

2022-05-19  Nick Clifton  <nickc@redhat.com>

    * dlltool.c (run): Initialise errmsg_fmt.
    * dllwrap.c (run): Likewise.
    * resrc.c (run_cmd): Likewise.
    * mclex.c (mc_add_keyword): Initialise usz.
    * srconv.c (wd_hd): Initialise hd.spare2.
    * windmc.c (mc_add_node_lang): Initialise s.
    (mc_generate_bin_item): Initialise cvt_txt.
    (main): Initialise u.

2022-05-18  Nick Clifton  <nickc@redhat.com>

    PR 29135
    * nm.c (non_weak): New variable.
    (filter_symbols): When non-weak is true, ignore weak symbols.
    (long_options): Add --no-weak.
    (usage): Mention --no-weak.
    (main): Handle -W/--no-weak.
    * doc/binutils.texi: Document new feature.
    * NEWS: Mention the new feature.
    * testsuite/binutils-all/nm.exp: Add test of new feature.
    * testsuite/binutils-all/no-weak.s: New test source file.

2022-04-25  Nick Clifton  <nickc@redhat.com>

    PR 29072
    * testsuite/lib/binutils-common.exp (prune_warnings_extra): Filter
    out notes about the executable stacjk behaviour beign deprecated.

2022-04-12  Nick Clifton  <nickc@redhat.com>

    PR 28992
    * objcopy.c (is_strip_section_1): Do not delete debuglink sections
    when stripping debug information.

2022-04-06  Nick Clifton  <nickc@redhat.com>

    PR 28981
    * dwarf.c (fetch_indexed_value): Rename to fecth_indexed_addr and
    return the address, rather than a string.
    (fetch_indexed_value): New function - returns a value indexed by a
    DW_FORM_loclistx or DW_FORM_rnglistx form.
    (read_and_display_attr_value): Add support for DW_FORM_loclistx
    and DW_FORM_rnglistx.
    (process_debug_info): Load the loclists and rnglists sections.
    (display_loclists_list): Add support for DW_LLE_base_addressx,
    DW_LLE_startx_endx, DW_LLE_startx_length and
    DW_LLE_default_location.
    (display_offset_entry_loclists): New function.  Displays a
    .debug_loclists section that contains offset entry tables.
    (display_debug_loc): Call the new function.
    (display_debug_rnglists_list): Add support for
    DW_RLE_base_addressx, DW_RLE_startx_endx and DW_RLE_startx_length.
    (display_debug_ranges): Display the contents of the section's
    header.
    * dwarf.h (struct debug_info): Add loclists_base field.
    * testsuite/binutils-all/dw5.W: Update expected output.
    * testsuite/binutils-all/x86-64/pr26808.dump: Likewise.

2022-04-01  John Baldwin  <jhb@FreeBSD.org>

    * readelf.c (get_freebsd_elfcore_note_type): Handle
    NT_FREEBSD_X86_SEGBASES.

2022-03-31  Nick Clifton  <nickc@redhat.com>

    * arlex.l: Accept the plus character as part of a filename.

2022-03-16  Fangrui Song  <maskray@google.com>

    PR binutils/28926
    * objcopy.c (filter_symbols): Apply weaken to STB_GNU_UNIQUE symbols
    * NEWS: Mention feature.
    * testsuite/binutils-all/objcopy.exp (objcopy_test_symbol_manipulation): New test.
    * testsuite/binutils-all/weaken-gnu-unique.s: New.

2022-03-16  Martin StorsjÃ¶  <martin@martin.st>

    PR 28885
    * dlltool.c (main): use imp_name rather than dll_name when
    generating a temporary file name.

2022-03-16  Simon Marchi  <simon.marchi@efficios.com>

    * readelf.c (dump_relocations): Handle EM_AMDGPU.

2022-03-16  Simon Marchi  <simon.marchi@efficios.com>

    * Makefile.am (readelf_CFLAGS): New.
    (readelf_LDADD): Add MSGPACK_LIBS.
    * Makefile.in: Re-generate.
    * config.in: Re-generate.
    * configure: Re-generate.
    * configure.ac: Add --with-msgpack flag and check for msgpack
    using pkg-config.
    * readelf.c: Include msgpack.h if HAVE_MSGPACK.
    (print_note_contents_hex): New.
    (print_indents): New.
    (dump_msgpack_obj): New.
    (dump_msgpack): New.
    (print_amdgpu_note): New.
    (process_note): Handle NT_AMDGPU_METADATA note contents.
    Use print_note_contents_hex.

2022-03-16  Simon Marchi  <simon.marchi@efficios.com>

    * readelf.c (get_amdgpu_elf_note_type): New.
    (process_note): Handle "AMDGPU" notes.

2022-03-16  Simon Marchi  <simon.marchi@efficios.com>

    * readelf.c: Include elf/amdgcn.h.
    (decode_AMDGPU_machine_flags): New.
    (get_machine_flags): Handle flags for EM_AMDGPU machine type.

2022-03-16  Simon Marchi  <simon.marchi@efficios.com>

    * readelf.c (get_osabi_name): Handle EM_AMDGPU OS ABIs.

2022-03-16  Nick Clifton  <nickc@redhat.com>

    * po/sr.po: Updated Serbian translation.

2022-03-15  Tom Tromey  <tromey@adacore.com>

    * dwarf-mode.el: Now 1.7.
    (dwarf--sentinel): Switch to the process buffer.

2022-03-11  Vladimir Mezentsev  <vladimir.mezentsev@oracle.com>

    * MAINTAINERS: Add gprofng maintainer.
    * README-how-to-make-a-release: Add gprofng.

2022-03-10  Nick Clifton  <nickc@redhat.com>

    * dwarf.c (use_debuginfod): New variable.  Set to 1.
    (load_separate_debug_info): Only call
    debuginfod_fetch_separate_debug_info is use_debuginfod is true.
    (dwarf_select_sections_by_names): Add do-not-use-debuginfod and
    use-debuginfod options.
    (dwarf_select_sections_by_letters): Add D and E options.
    * dwarf.h (use_debuginfod): New extern.
    * objdump.c (usage): Mention the new options.
    * readelf.c (usage): Likewise.
    * doc/binutils.texi: Document the new options.
    * doc/debug-options.texi: Describe the new options.
    * NEWS: Mention the new feature.
    * testsuite/binutils-all/debuginfod.exp: Add tests of the new
    options.

2021-03-06  Maciej W. Rozycki  <macro@orcam.me.uk>

    * testsuite/binutils-all/mips/mips1-branch-alias.d: New test.
    * testsuite/binutils-all/mips/mips1-branch-noalias.d: New test.
    * testsuite/binutils-all/mips/mips2-branch-alias.d: New test.
    * testsuite/binutils-all/mips/mips2-branch-noalias.d: New test.
    * testsuite/binutils-all/mips/mips32r6-branch-alias.d: New test.
    * testsuite/binutils-all/mips/mips32r6-branch-noalias.d: New
    test.
    * testsuite/binutils-all/mips/micromips-branch-alias.d: New
    test.
    * testsuite/binutils-all/mips/micromips-branch-noalias.d: New
    test.
    * testsuite/binutils-all/mips/mips-branch-alias.s: New test
    source.
    * testsuite/binutils-all/mips/micromips-branch-alias.s: New test
    source.
    * testsuite/binutils-all/mips/mips.exp: Run the new tests.

2022-03-04  Simon Marchi  <simon.marchi@polymtl.ca>

    * readelf.c (process_dynamic_section): Fix indentation.
