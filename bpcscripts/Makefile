# $NetBSD$
#
###########################################################
#                  Generated by fbsd2pkg                  #
#              Fri May 20 17:44:36 CDT 2016               #
###########################################################

DISTNAME=	bpcscripts-${PORTVERSION}
CATEGORIES=	biology
MASTER_SITES=	${MASTER_SITE_GITHUB:=MBL-Woods-Hole/}
GITHUB_PROJECT=	BPC-scripts
GITHUB_TAG=	73c814a243955dc64ee248d9dacd4f71ac8640dc

MAINTAINER=	bacon@NetBSD.org
HOMEPAGE=	https://vamps.mbl.edu/resources/software.php
COMMENT=	Gast Illumina processing
# Check this
LICENSE=	mit

USE_LANGUAGES=	# empty
USE_TOOLS+=	perl:run
REPLACE_PERL=	gast_ill
NO_BUILD=	yes

SUBST_CLASSES+=		perllib
SUBST_STAGE.perllib=	post-patch
SUBST_SED.perllib=	-e "s|use Taxonomy;|use lib(\"${SITE_PERL}/${PORTNAME}\"); &|g"
SUBST_FILES.perllib+=	&|g"
SUBST_FILES.perllib+=	${WRKSRC}/gast_ill

DEPENDS+=	vsearch-[0-9]*:../../wip/vsearch
DEPENDS+=	fastaunique-[0-9]*:../../wip/fastaunique

PORTNAME=	bpcscripts
PORTVERSION=	2016.02.09
SITE_PERL=	${PREFIX}/share

INSTALLATION_DIRS=	bin ${SITE_PERL}/${PORTNAME}

do-install:
	${INSTALL_SCRIPT} ${WRKSRC}/gast_ill ${DESTDIR}${PREFIX}/bin
	${MKDIR} ${DESTDIR}/${SITE_PERL}/${PORTNAME}
	${INSTALL_DATA} ${WRKSRC}/*.pm \
		${DESTDIR}${SITE_PERL}/${PORTNAME}

.include "../../mk/bsd.pkg.mk"
