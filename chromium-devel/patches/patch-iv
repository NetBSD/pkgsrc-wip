$NetBSD: patch-iv,v 1.1 2010/10/10 15:17:15 rxg Exp $

--- chrome/browser/zygote_main_linux.cc.orig	2010-09-13 15:19:37.000000000 +0000
+++ chrome/browser/zygote_main_linux.cc
@@ -4,6 +4,7 @@
 
 #include <dlfcn.h>
 #include <fcntl.h>
+#include <signal.h>
 #include <sys/epoll.h>
 #include <sys/prctl.h>
 #include <sys/signal.h>
@@ -50,7 +51,7 @@
 
 #include "unicode/timezone.h"
 
-#if defined(ARCH_CPU_X86_FAMILY) && !defined(CHROMIUM_SELINUX)
+#if defined(ARCH_CPU_X86_FAMILY) && !defined(CHROMIUM_SELINUX) && defined(OS_LINUX)
 // The seccomp sandbox is enabled on all ia32 and x86-64 processor as long as
 // we aren't using SELinux.
 #define SECCOMP_SANDBOX
@@ -616,6 +617,7 @@ static bool EnterSandbox() {
     // Note: a non-dumpable process can't be debugged. To debug sandbox-related
     // issues, one can specify --allow-sandbox-debugging to let the process be
     // dumpable.
+#if defined(OS_LINUX)
     const CommandLine& command_line = *CommandLine::ForCurrentProcess();
     if (!command_line.HasSwitch(switches::kAllowSandboxDebugging)) {
       prctl(PR_SET_DUMPABLE, 0, 0, 0, 0);
@@ -624,6 +626,7 @@ static bool EnterSandbox() {
         return false;
       }
     }
+#endif
   } else {
     SkiaFontConfigUseDirectImplementation();
   }
