$NetBSD: patch-ab,v 1.1.1.1 2004/02/22 19:18:52 tomhensel Exp $

--- dovecot-example.conf.orig	2003-11-11 09:59:27.000000000 +0000
+++ dovecot-example.conf	2004-02-22 18:30:31.000000000 +0000
@@ -1,28 +1,30 @@
 ## Dovecot 1.0 configuration file
 
 # Default values are shown after each value, it's not required to uncomment
-# any of the lines. Exception to this are paths, they're just examples
-# with real defaults being based on configure options. The paths listed here
-# are for configure --prefix=/usr --sysconfdir=/etc --localstatedir=/var
-# --with-ssldir=/etc/ssl
+# any of the lines. Exception to this are paths, they're just examples with
+# real defaults being based on configure options.
 
 # Base directory where to store runtime data.
 #base_dir = /var/run/dovecot/
 
 # Protocols we want to be serving:
 #  imap imaps pop3 pop3s
+protocols = imap
 #protocols = imap imaps
+#protocols = imaps
 
 # IP or host address where to listen in for connections. It's not currently
 # possible to specify multiple addresses. "*" listens in all IPv4 interfaces.
 # "[::]" listens in all IPv6 interfaces, but may also listen in all IPv4
 # interfaces depending on the operating system. You can specify ports with
 # "host:port".
-#listen = *
+listen = *
+#listen = [::]
 
 # IP or host address where to listen in for SSL connections. Defaults
 # to above if not specified.
 #ssl_listen =
+#ssl_listen = [::]
 
 # Disable SSL/TLS support.
 #ssl_disable = no
@@ -31,8 +33,8 @@
 # dropping root privileges, so keep the key file unreadable by anyone but
 # root. Included doc/mkcert.sh can be used to easily generate self-signed
 # certificate, just make sure to update the domains in dovecot-openssl.cnf
-#ssl_cert_file = /etc/ssl/certs/dovecot.pem
-#ssl_key_file = /etc/ssl/private/dovecot.pem
+#ssl_cert_file = @PREFIX@/etc/ssl/certs/imap.pem
+#ssl_key_file = @PREFIX@/etc/ssl/private/imap.pem
 
 # SSL parameter file. Master process generates this file for login processes.
 # It contains Diffie Hellman and RSA parameters.
@@ -127,14 +129,14 @@
 # to make sure that users can't log in as daemons or other system users.
 # Note that denying root logins is hardcoded to dovecot binary and can't
 # be done even if first_valid_uid is set to 0.
-#first_valid_uid = 500
+first_valid_uid = 100
 #last_valid_uid = 0
 
 # Valid GID range for users, defaults to non-root/wheel. Users having
 # non-valid GID as primary group ID aren't allowed to log in. If user
 # belongs to supplementary groups with non-valid GIDs, those groups are
 # not set.
-#first_valid_gid = 1
+first_valid_gid = 100
 #last_valid_gid = 0
 
 # ':' separated list of directories under which chrooting is allowed for mail
@@ -166,7 +168,8 @@
 #   default_mail_env = mbox:~/mail/:INBOX=/var/mail/%u
 #   default_mail_env = mbox:/var/mail/%d/%n/:INDEX=/var/indexes/%d/%n
 #
-#default_mail_env = 
+#default_mail_env = maildir:/home/%u/Maildir
+#default_mail_env = mbox:~/mail/:INBOX=/var/mail/%u
 
 # Space-separated list of fields to cache for all mails. Currently these
 # fields are allowed followed by a list of commands they speed up:
@@ -253,7 +256,7 @@
 # know any MUA which would modify mail files directly. IMAP protocol also
 # requires that the mails don't change, so it would be problematic in any case.
 # If you care about performance, enable it.
-#maildir_copy_with_hardlinks = no
+maildir_copy_with_hardlinks = yes
 
 # Check if mails' content has been changed by external programs. This slows
 # down things as extra stat() needs to be called for each file. If changes are
@@ -272,7 +275,7 @@
 # with is important to avoid deadlocks if other MTAs/MUAs are using both fcntl
 # and flock. Some operating systems don't allow using both of them
 # simultaneously, eg. BSDs. If dotlock is used, it's always created first.
-#mbox_locks = dotlock fcntl
+mbox_locks = fcntl
 
 # Should we create dotlock file even when we want only a read-lock? Setting
 # this to yes hurts the performance when the mailbox is accessed simultaneously
@@ -312,12 +315,12 @@
 
 protocol imap {
   # Login executable location.
-  #login_executable = /usr/libexec/dovecot/imap-login
+  #login_executable = @PREFIX@/libexec/dovecot/imap-login
 
   # IMAP executable location
-  #mail_executable = /usr/libexec/dovecot/imap
+  #mail_executable = @PREFIX@/libexec/dovecot/imap
   # This would write rawlogs into ~/dovecot.rawlog/ directory:
-  #mail_executable = /usr/libexec/dovecot/rawlog /usr/libexec/dovecot/imap
+  #mail_executable = @PREFIX@/libexec/dovecot/rawlog @PREFIX@/libexec/dovecot/imap
 
   # Maximum IMAP command line length in bytes. Some clients generate very long
   # command lines with huge mailboxes, so you may need to raise this if you get
@@ -326,24 +329,24 @@
 
   # Support for dynamically loadable modules.
   #mail_use_modules = no
-  #mail_modules = /usr/lib/dovecot/imap
+  #mail_modules = @PREFIX@/lib/dovecot/imap
 }
   
 ##
 ## POP3 specific settings
 ##
 
-protocol pop3 {
-  # Login executable location.
-  #login_executable = /usr/libexec/dovecot/pop3-login
-
-  # POP3 executable location
-  #mail_executable = /usr/libexec/dovecot/pop3
-
-  # Support for dynamically loadable modules.
-  #mail_use_modules = no
-  #mail_modules = /usr/lib/dovecot/pop3
-}
+#protocol pop3 {
+#  # Login executable location.
+#  #login_executable = @PREFIX@/libexec/dovecot/pop3-login
+#
+#  # POP3 executable location
+#  #mail_executable = @PREFIX@/libexec/dovecot/pop3
+#
+#  # Support for dynamically loadable modules.
+#  #mail_use_modules = no
+#  #mail_modules = @PREFIX@/lib/dovecot/pop3
+#}
 
 ##
 ## Authentication processes
@@ -356,7 +359,7 @@
 # database.
 
 # Executable location
-#auth_executable = /usr/libexec/dovecot/dovecot-auth
+#auth_executable = @PREFIX@/libexec/dovecot/dovecot-auth
 
 # Set max. process size in megabytes.
 #auth_process_size = 256
@@ -387,7 +390,7 @@
 auth default {
   # Space separated list of wanted authentication mechanisms:
   #   plain digest-md5 cram-md5 anonymous
-  mechanisms = plain
+  mechanisms = plain digest-md5 cram-md5
 
   # Where user database is kept:
   #   passwd: /etc/passwd or similiar, using getpwnam()
@@ -406,7 +409,7 @@
   #   vpopmail: vpopmail authentication
   #   ldap <config path>: LDAP, see doc/dovecot-ldap.conf
   #   pgsql <config path>: a PostgreSQL database, see doc/dovecot-pgsql.conf
-  passdb = pam
+  passdb = passwd
 
   # User to use for the process. This user needs access to only user and
   # password databases, nothing else. Only shadow and pam authentication
