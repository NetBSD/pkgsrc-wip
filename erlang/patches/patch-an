$NetBSD: patch-an,v 1.2 2010/02/24 13:49:55 marttikuparinen Exp $

--- erts/emulator/hipe/hipe_ppc.c.orig	2009-03-12 14:16:15.000000000 +0200
+++ erts/emulator/hipe/hipe_ppc.c	2010-02-24 14:41:39.000000000 +0200
@@ -119,7 +119,11 @@
 	map_hint = (char*)(512*1024*1024); /* 0.5GB */
     map_start = mmap(map_hint, SEGMENT_NRBYTES,
 		     PROT_EXEC|PROT_READ|PROT_WRITE,
-		     MAP_PRIVATE|MAP_ANONYMOUS,
+		     MAP_PRIVATE|MAP_ANONYMOUS
+#ifdef MMAP_MAP_FIXED
+		     | MAP_FIXED
+#endif
+		     ,
 		     -1, 0);
     if (map_start != MAP_FAILED &&
 	(((unsigned long)map_start + (SEGMENT_NRBYTES-1)) & ~0x7FFFFFFFUL)) {
@@ -133,7 +137,11 @@
 {
     return mmap(0, SEGMENT_NRBYTES,
 		PROT_EXEC|PROT_READ|PROT_WRITE,
-		MAP_PRIVATE|MAP_ANONYMOUS,
+		MAP_PRIVATE|MAP_ANONYMOUS
+#ifdef MMAP_MAP_FIXED
+		| MAP_FIXED
+#endif
+		,
 		-1, 0);
 }
 #endif
