sysutils/gkrellm-share: Update to 2.4.0

pkgsrc changes:
- Changed HOMEPAGE. gkrellm.net has apparently been taken over and now it
  only contains irrelevent ads and AI-generated crap, pretending to still
  be the official website. It's clearly a fake because it doesn't even
  distribute the source tarball. The upstream has moved to srcbox.net.
- Removed patch-aa (src/sysdeps/bsd-common.c), patch-ab
  (src/sysdeps/netbsd.c), patch-ac (src/sysdeps/openbsd.c), patch-ad
  (src/sysdeps/bsd-net-open.c), patch-ae (server/gkrellmd-private.h),
  patch-ag (src/chart.c), patch-ah (src/config.c), patch-ai (src/disk.c),
  patch-aj (src/mail.c), patch-ak (src/net.c), patch-al (src/sensors.c),
  patch-an (server/mail.c), patch-ao (server/sysdeps-unix.c), patch-ap
  (src/client.c), patch-aq (server/main.c), patch-ar (src/monitor.c),
  patch-as (src/configure), patch-au (src/gkrellm.h), patch-aw
  (src/inet.h), patch-ay (src/sysdeps-unix.c), and patch-az
  (src/sysdeps/sensors-common.c): The upstream took our patch and merged
  them. How amazing!
- Removed patch-am (src/smbencrypt.c): The upstream removed SMB stuff and
  now it uses libntlm.
- Removed patch-Makefile.inc and patch-src_Makefile: We've (including me)
  been patching makefiles without knowing those files have come from pkgsrc
  but not from upstream. The original files were in ${FILESDIR}. This is
  confusing even to us, pkgsrc devs, so don't do this anymore.
- gkrellmd from sysutils/gkrellm-server is no longer setuid'ed on NetBSD,
  because its NetBSD-specific code has migrated away from kvm to sysctl.
- NLS support is now optional but is enabled by default.
- Dropped the option for building with glib1 instead of glib2. It's no
  longer supported.
- Dropped optional dependencies from sysutils/gkrellm/buildlink3.mk because
  they are private to sysutils/gkrellm and don't affect any of the plugins.
- Moved gkrellmd from ${PREFIX}/bin to ${PREFIX}/sbin because it's not
  supposed to be directly executed by users. Its man page is now also moved
  to section 8.

upstream changes:

## [2.4.0](https://git.srcbox.net/gkrellm/gkrellm/releases/tag/gkrellm-2.4.0) - 2025-01-19

- Use a sans-serif font and slightly bigger font sizes by default
- Add native GnuTLS support mail check via SSL/TLS and require GnuTLS 3.3 or newer (#29)
- Add and install a systemd service unit for gkrellmd
- Install gkrellmd configuration file in standard "install" make target
- Require and always use `getaddrinfo()` function. In a previous release this
  was already done on Linux. Now it also applies to other platforms like BSD,
  macOS, Solaris and Windows.
- Enable gkrellmd timeouts by default to make gkrellm clients automatically
  reconnect after a connection loss
- Fix syslog facility/priority code in gkrellmd to be POSIX compliant so it
  is more portable to Unix platforms other than Linux
- Require OpenSSL 1.1 or newer for mail check via SSL/TLS.
- Fix translations and add menu items to main context menu which were previously
  only available as debug options
- Replace MD5 code with existing functionality from GLib
- Add and install XDG desktop file as well as icons on Unix/Linux systems.
  This uses the GKrellM icon used on Windows only so far because the old icon
  is only available in a very small size that is not suitable for modern
  screen sizes. The icon is also used as the default window icon in taskbars
  and launchers.
- Use locale-dependent date and time formatting by default
- Add Windows 10, 11, Server 2016/2019/2022 OS version detection
- Do not strip executables during installation by default anymore. Use
  `make install-strip` if you prefer the old behavior.
- Fix syntax errors in manual pages (patch by Sandro Tosi)
- Fix GTK and GLib deprecation warnings and require GTK >= 2.24
- Fix most compiler warnings when building with GCC 13 and Clang 18
- Center each line in multiline clock/calendar decals
- Fix IPv6 address matching in gkrellmd client access list
- Update French translation (patch by Jerome UZEL)
- Fix stack corruption in Solaris kstat code (patch by Adam Stylinsk)

## [2.3.11](https://git.srcbox.net/gkrellm/gkrellm/releases/tag/gkrellm-2.3.11) - 2019-07-25

- Fix krell scale for medium sized filesystems (based on patch by Peter Hymann)
- Support OpenSSL >= 1.1 for mail check over SSL/TLS
- Sort Linux disk devices alphabetically (patch by Petr Gajdos)
- Avoid corruption of chart labels (based on patch by Stefan Seyfried)
- Fix possible buffer-overflow in disk size formatting

## [2.3.10](https://git.srcbox.net/gkrellm/gkrellm/releases/tag/gkrellm-2.3.10) - 2016-10-23

- Fix Linux nvme block devices
- Do not reject disks because they are not found in `/proc/devices` (the nvme
  disks may not be there) so new default is to accept anything in
  `/proc/diskstats` regardless if major number is known or in devices file.

## [2.3.9](https://git.srcbox.net/gkrellm/gkrellm/releases/tag/gkrellm-2.3.9) - 2016-10-11

- Fix mmc block devices (regression in 2.3.8)
- Allow Pango markup for all configurable panel labels

## [2.3.8](https://git.srcbox.net/gkrellm/gkrellm/releases/tag/gkrellm-2.3.8) - 2016-09-07

- Add option to ignore network interfaces that match a regular expression
  pattern
- Fix composite disk graph double counting
- Handle dynamic disk major numbers for `dm` and `mdp` virtual devices and don't
  add their data to the composite disk
- Disk panel labels are now configurable. This is mostly useful for user
  labeling of virtual disks
- Use wrap bytes instead of discarding data when cumulative chart data overflows
- Changed keyboard shortcut for theme changes to `Shift+Page Up` and `Shift+Page Down`
  (patch by Pavel Reznicek)
- Indentation cleanup bugfix for Linux kernel version detection
  (patch by Ville Skytta)

## [2.3.7](https://git.srcbox.net/gkrellm/gkrellm/releases/tag/gkrellm-2.3.7) - 2016-06-03

- Use `gdk_pixbuf_new_from_data()` instead of deprecated
  `gdk_pixbuf_new_from_inline()`. Inline `alert_inline[]` needed to be --raw.
- Fix sending error message back to clients that were refused by gkrellmd and
  add dialog to gkrellm client to display the error message
- Fix possible chart rendering problem for single pixels
- Fix compilation without OpenSSL and GnuTLS (patch by Felix Janda)
- Always use `getaddrinfo()` on Linux to fix IPv6 support on C libraries other
  than glibc (for example musl libc)
- Fix handling of `mmcblkN` SD disk partition numbers

## [2.3.6-RC2](https://git.srcbox.net/gkrellm/gkrellm/releases/tag/gkrellm-2.3.6-rc2) - 2015-12-23

- Each real CPU chart may be individually enabled instead of as a group so CPU
  charts may be split into multiple instances. For systems with large numbers
  of CPUs.
- Make drawing CPU panel labels optional to allow saving vertical space.
- Patch from Ville Skytta: fix some `netbsd.c` and `winops-win32.c` issues flagged by cppcheck.
- Patch from Neil Booth: Add multiple CPU capability to CPU monitor for
  Dragonfly. Acquired `dragonfly.c` from web so could apply patch. I have no clue
  why I never had a `dragonfly.c`.
- Patch from Jindrich Makovicka: Update multiple GKrellM files to compile with
  `-DGTK_DISABLE_DEPRECATED -DGSEAL_ENABLE` for GTK3 compatibility. Replaces
  GtkItemFactory and GtkTooltips.
- Add nvidia-smi interface to linux.c for getting nvidia GPU temperatures.
- Translation updates
  - ru.po from Roman Savochenko
  - uk.po new translation from Roman Savochenko
  - pt.po new translation from Ze based on pt_BR.po
  - fr.po from Jerome UZEL
- Bugfixes
  - fix memory leaks: add `g_thread_unref()` for all GThread pointers returned
    from `g_thread_new()` calls.
  - Flag config as modified when changing a charts Resolution per Grid and bump
    max grid resolution to 500000000.
  - Store lockfiles under `/var/lock/gkrellm-UID` directories to make lockfiles
    work for multiple users.
- Only link against and initialize Libgcrypt when building with GnuTLS < 2.12.
  This allows using GKrellM with GnuTLS versions built against Nettle instead
  of Libgcrypt.
- Patch from Gerard Neil: Skip autofs mounts in free disk space polling
- Patch from Gerard Neil: Handle cifs as remote filesystem to use longer
  `nfs-timeout` polling interval
- Patch from Alexandre Rostovtsev: Explicitly link against gmodule-2.0
- Add support for GPU-Z sensor information on Windows
- Increase minimum required GLib version to 2.32, some parts of gkrellm use
  newer GLib API
- Drop remaining GLib 1.x compatibility from gkrellmd
- Patch from Ville SkyttÃ¤: Allow binding to a listen address that doesn't exist
  yet (gkrellmd)
- Patch from Pierre Neyron: Option to enable/disable new network interfaces
  by default

2.3.5 - Thu Oct 7, 2010
------------------------
	* Patch from Hajimu Umemoto: use utmpx instead of utmp on FreeBSD 9-CURRENT
	* Linux sensors: check for /sys/class/thermal/thermal_zone[0-*].
	* Patch from Simon de Hartog: Add Linux net monitor checking for
	  IPv6 routes.
	* Patches from Stefan Gehn:
	    - Use dynamic buffering to handle large disk names from a Mac gkrellmd.
	    - Clean up debug printing by using gkrellm_debug(), g_message(),
	      g_debug(), g_warning().
	    - Replace sprintf() calls with snprintf().
	    - Use glib gstdio to replace unix calls: fopen()->g_fopen(), etc.
	    - Use glib mutex functions for portability when building with
	      GnuTLS.
	    - Fix IMAP login by escaping backslash and double-quotes in
	      username, password and mailbox strings.
	    - Fix initial sending of fstab entries in gkrellmd, fstab was only
	      sent if it was marked as "changed"
	    - Configure scripts handle pkg-config and compiler errors better.
	    - src/Makefile: Rename SMC_LIBS to X11_lIBS and add -lX11
	    - Makefile: Drop duplicating SMC_LIBS in "netbsd" targets by calling
	      src/Makefile with "netbsd" target instead of using the generic
	      "gkrellm" target.
	    - gkrellmd: Make "-d" commandline option the short version
	      for "--detach" instead of for "--debug-level".
	    - Enable IPv6-support on win32 if target os is windows xp or newer.
	    - Support monitoring of active IPv6 TCP connections on windows vista
	      or newer.
	    - Fix building with mingw-w64 environment.
	    - Fix time formatting on win32 for monthly network statistics
	* Patch from Stefan Gehn: add searching for linux sensors directly below
	  hwmon dir since kernel is putting newer devices there.
	* Patch from Hajimu Umemoto: FreeBSD memory usage calculation update.
	* Translation updates
	  o fr.po from Jerome UZEL
	  o es.po from Cristian Othon Martinez Vera
	  o de.po minor bug patch from Jan Brinkmann.
	  o pt_BR.po update from Vinicius Moreira de Oliveira
	* Bugfixes
	  o Fix eof check in fgets_pipe() (when using external mail check program).
	  o Jindrich Makovicka patch: fix some aliasing violations due to
	    sockaddr_* typecasting.
	  o Ville Skytta patch: add explicit -lm linking to fix Fedora builds
	    with --no-add-needed.

2.3.4 - Mon Jan 4, 2010
------------------------
	* Add gkrellm_sys_setup_connect() function so sysdep code can register
	  from gkrellm_sys_main_init() a setup function to call after main()
	  argument parsing.
	* Patch from Hajimu Umemoto: add FreeBSD support for the amdtemp
	  temperature sensor.
	* Add some mbmon usage help to gkrellm.1 and README.
	* Bugfixes
	  o Patch from Sandro Tosi: fix a FTBFS when using gold as linker
	    (by simply adding -lX11).
	  o Add SSL library init calls to mail check for gnutls case.
	  o Patch from Hans de Goede: Fix some crashes - check for NULL GC when
	    drawing root pixmap on transparent chart or panel.
	  o Patch from Goswin von Brederlow: Ignore device mapper devices in
	    Linux disk stats.

2.3.3 - Mon Dec 21, 2009
------------------------
	* gkrellm.spec update from Tim Keller.
	* Patch from Cyrus Rahman: restore gkrellm_sys_main_init() call to proper
	  place and fix FreeBSD sensors for amd64 and fix allocate sensor bug.
	* Patch from Hajimu Umemoto: add --without-ntlm option
	* Patches from Hajimu Umemoto for FreeBSD:
	    - Support SMP CPU charts coming in FreeBSD 6.4-RELEASE and 7.1-RELEASE
	    - Use sysctl for swap info on recent FreeBSD; suppress compile warnings
	    - Include patch from Pietro Cerutti for coretemp(4) sensor support and
	      fix bug causing only one instance of a sensor type to be added.
	    - Include patch from Sven Berkvens-Matthijsse to enable battery support
	      on amd64 using ACPI.
	* Patch from Stefan Gehn: Makefile & configure ntlm detect use pkg-config.
	* Patch from Erik-Jan: sensors monitor option to show temperature units.
	* Patch from Hans de Goede: rename getline to gkrellm_getline to avoid
	      conflict with new getline function in recent glibc.
	* Bugfixes
	  o Fix a crah by moving "unable to connect" Gtk dialogs outside
	    of the connect to client thread.
	  o Divide by zero crash in Linux battery monitor when batteries are dead.
	  o Patch from Hans de Goede: fix a crash by adding openssl mail check
	    locking to mail monitor.
	* Translation updates
	  o pt_BR.po update from Vinicius Moreira de Oliveira

2.3.2 - Fri Oct 3, 2008
------------------------
	* Patch from Stefan Gehn:
	    - Add error logging routines so errors and debugging can be routed to
	      a file or stdout, and gkrellmd can log to the system syslog file.
	      Begin replacing debug printf() with g_message(), g_warning(), etc
	      functions to support the logging functions.
	    - Port gtk_combo functions to gtk_combo_box
	    - Add client mode server connection error dialog pupups.
	    - Use GTK 2.12 gtk_widget_xxx_tooltip over gtk_tooltip in mail.c 
	    - win32 changes:
	        Use unicode function calls.
	        Use getaddrinfo() on win32.
	        Support CoreTemp application for getting cpu temperatures.
	        Redo sensor-handling to support multiple sensor backends.
	        Make Proc monitor work and properly count # of logged in users.
	        Mem monitor displays cache bytes.
	        System name shows some new windows versions.
	        Remove trayicon
	    - Other various cleanups and changes in his quite large patch.
	* Add OpenSSL license exception.
	  Make OpenSSL the default to avoid gnutls symbol conflict crash.
	* Link to libntlm and remove smb* files from gkrellm source distribution.
	* Patch from Takao Fujiwara: Pass clock/calendar strings to strftime in
	  current locale.  Bump default width up to 100.
	* Patch from Leo Schwab: add linux sysfs battery interface.  Use
	  preferencially over deprecated /proc/acpi interface.
	* Patch from Lycestra:
	    - Mac OS X support:
	        "darwin9" build mode for Leopard, which lacks libkvm
	        add inet monitor interface
			add buffers and cache data to memory monitor
	    - don't client connect to server in the case read_server_setup() fails
	* Bugfixes
	  o Allow spaces in file system monitor directories.
	  o Andrey Rahmatullin and Ravi Pinjal both sent a patch to fix:
	    some memleaks in clock monitor.
	  o Ken Milmore patch: fix configure script to work for lm_sensors >= 3.1
	  o NULL serve_name segfault
	* Translation updates
	  o pl.po from Michal Smoczyk

2.3.1 - Sun Dec 2, 2007
------------------------
	* Clock/Calendar monitor rewritten to use user configurable display
	  format strings containing strftime conversion characters and
	  Pango text attribute markup strings.
	* Hans de Goede patch: add new to be released libsensors4 interface to
	  linux sensors.
	* Martijn Ras patch: -A option to bind gkrellmd to a specific interface.
	* Include UDP connections in the Linux inet monitor.
	* Bugfixes
	  o Ville Skytta patch: add gcrypt.h for mail monitor gnutls support.
	  o Add test for "charged" when checking linux battery charging state.
	  o Stop pumping extra "float_factor" lines into user-config.
	  o Add omitted substitution variables: $L for disk, $H for some others.
	  o make fs monitor panels adjust height according to changes in text
	    extents with panel format string Pango markup changes (and fs
	    labels can now use markup).
	* Translation updates
	  o de.po from Steffen Weise
	  o fr.po from Jerome UZEL
	  o pl.po from Michal Smoczyk

2.3.0 - Fri Jul 20, 2007
------------------------
	* Upgrade to GPLv3
	* Jindrich Makovicka patch: mail check for Sylpheed .claws_mark mark file.
	* Stefan Gehn large set of patches for Windows:
	    1) Makefiles updated for Windows 2000/XP builds under MinGW/MSYS.
	       Drop win9x support.
	    2) Add support: SpeedFan sensors, tcp port stats for the Inet monitor,
	       theme transparency, 
	    3) Add Vista detection, but running under Vista needs testing.
	    4) Improve the plugin interface.  Added static libgkrellm.a for easier
	       plugin porting.  New files: src/win32-libgkrellm.c,
	       src/win32-plugin.c server/win32-gui.c  server/win32-gui.h 
	       server/win32-libgkrellmd.c server/win32-plugin.c
	       server/win32-plugin.h.
	       Pass callback pointer to win32 gkrellmd plugins.
	    5) Various #ifdef WIN32 unix/windows compatibility cleanups, new
	       gkrellmd_get_timer_ticks() and gkrellmd_ticks() functions, trayicon
	       handling.
	* Michal Nazarewicz patch: preserve config of disabled monitors.
	* Anthony Mallet patches:
	    1) Add NetBSD ACPI battery monitor support.
	    2) Collection of NetBSD pkgsrc port patches: Disk monitor API changes,
	       DragonFLY OS support, 64 bit compile cleanups.
	* Will Simoneau patch: look for linux I2O disks.
	* Don't save config for disabled non-existing net interfaces.
	* Add memory monitor raw free and raw used panel variables.
	* Plugin interface to export strings (data) for panel/chart labels.
	  Net monitor updated to check for exports.
	* Linux nvidia GPU option to use nvclock when nvidia-settings fails.
	* Translation updates
	  o de.po from Steffen Weise
	  o fr.po from Jerome UZEL
	* Bugfixes
	  o Add SubstructureRedirectMask in net_wm_state().
	  o gkrellmd documentation: fix gkrellmd.1 typos, add missing pidfile.
	  o Read of inet update_interval from config failed.
	  o Negative sensor factors weren't saved in the config.
	  o Linux sensors:
	    1) handle libsensors via686a 2.0V voltage label style.
	    2) Read temps from multiple nVidia gpu cores.
	  o Linux.c 64 bit compile warnings.
