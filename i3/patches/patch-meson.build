$NetBSD: patch-meson.build,v 1.1 2021/09/12 07:22:47 nia Exp $

Install config files to examples, per pkgsrc policy.

Check for uselocale() before using it.
https://github.com/i3/i3/issues/6566

--- meson.build.orig	2021-02-27 09:37:58.753311900 +0000
+++ meson.build
@@ -44,7 +44,7 @@ else
   cdata.set('PATCH_VERSION', 0)
 endif
 cdata.set_quoted('I3_VERSION', '@VCS_TAG@')
-cdata.set_quoted('SYSCONFDIR', join_paths(get_option('prefix'), get_option('sysconfdir')))
+cdata.set_quoted('SYSCONFDIR', join_paths(get_option('sysconfdir')))
 
 if get_option('b_sanitize').split(',').contains('address')
   cdata.set('I3_ASAN_ENABLED', 1)
@@ -52,6 +52,7 @@ endif
 
 cdata.set('HAVE_STRNDUP', cc.has_function('strndup'))
 cdata.set('HAVE_MKDIRP', cc.has_function('mkdirp'))
+cdata.set('HAVE_USELOCALE', cc.has_function('uselocale'))
 
 # Instead of generating config.h directly, make vcs_tag generate it so that
 # @VCS_TAG@ is replaced.
@@ -580,7 +581,7 @@ install_data(
 install_subdir(
   'etc',
   strip_directory: true,
-  install_dir: join_paths(get_option('sysconfdir'), 'i3'),
+  install_dir: join_paths(get_option('datadir'), 'examples', 'i3'),
 )
 
 install_subdir(
