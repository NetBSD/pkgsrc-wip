$NetBSD: patch-aa,v 1.1.1.1 2003/04/06 00:30:47 marmfield Exp $

--- Makefile.in.orig	Sat Oct 26 10:47:15 2002
+++ Makefile.in
@@ -19,16 +19,17 @@ LDFLAGS=@LDFLAGS@ @LIBS@
 
 prefix=@prefix@
 exec_prefix=@exec_prefix@
-LOGDIR=@localstatedir@
+LOGDIR=@localstatedir@/log/nagios
 CFGDIR=@sysconfdir@
 BINDIR=@bindir@
-CGIDIR=@sbindir@
+CGIDIR=@libexecdir@
 HTMLDIR=@datadir@
+SAMPDIR=@prefix@/share/examples/nagios
 INSTALL=@INSTALL@
 INSTALL_OPTS=@INSTALL_OPTS@
 COMMAND_OPTS=@COMMAND_OPTS@
 INIT_DIR=@init_dir@
-INIT_OPTS=-o root -g root
+INIT_OPTS=-o root -g wheel
 CGICFGDIR=$(CGIDIR)
 PERLDIR=@PERLDIR@
 
@@ -152,10 +153,8 @@ install:
 	cd $(SRC_BASE) && $(MAKE) $@
 	cd $(SRC_CGI) && $(MAKE) $@
 	cd $(SRC_HTM) && $(MAKE) $@
-	$(INSTALL) -m 775 $(INSTALL_OPTS) -d $(DESTDIR)$(LOGDIR)
-	$(INSTALL) -m 775 $(INSTALL_OPTS) -d $(DESTDIR)$(LOGDIR)/archives
 	if [ $(INSTALLPERLSTUFF) = yes ]; then \
-		$(INSTALL) -m 664 $(INSTALL_OPTS) p1.pl $(DESTDIR)$(BINDIR); \
+		${BSD_INSTALL_SCRIPT} p1.pl $(DESTDIR)$(BINDIR); \
 	fi;
 
 	@echo ""
@@ -182,20 +181,20 @@ install:
 
 
 install-config:
-	$(INSTALL) -m 775 $(INSTALL_OPTS) -d $(DESTDIR)$(CFGDIR)
-	$(INSTALL) -m 664 $(INSTALL_OPTS) sample-config/nagios.cfg $(DESTDIR)$(CFGDIR)/nagios.cfg-sample
-	$(INSTALL) -m 664 $(INSTALL_OPTS) sample-config/cgi.cfg $(DESTDIR)$(CFGDIR)/cgi.cfg-sample
-	$(INSTALL) -m 660 $(INSTALL_OPTS) sample-config/resource.cfg $(DESTDIR)$(CFGDIR)/resource.cfg-sample
-	$(INSTALL) -m 664 $(INSTALL_OPTS) sample-config/template-object/checkcommands.cfg $(DESTDIR)$(CFGDIR)/checkcommands.cfg-sample
-	$(INSTALL) -m 664 $(INSTALL_OPTS) sample-config/template-object/contactgroups.cfg $(DESTDIR)$(CFGDIR)/contactgroups.cfg-sample
-	$(INSTALL) -m 664 $(INSTALL_OPTS) sample-config/template-object/contacts.cfg $(DESTDIR)$(CFGDIR)/contacts.cfg-sample
-	$(INSTALL) -m 664 $(INSTALL_OPTS) sample-config/template-object/dependencies.cfg $(DESTDIR)$(CFGDIR)/dependencies.cfg-sample
-	$(INSTALL) -m 664 $(INSTALL_OPTS) sample-config/template-object/escalations.cfg $(DESTDIR)$(CFGDIR)/escalations.cfg-sample
-	$(INSTALL) -m 664 $(INSTALL_OPTS) sample-config/template-object/hostgroups.cfg $(DESTDIR)$(CFGDIR)/hostgroups.cfg-sample
-	$(INSTALL) -m 664 $(INSTALL_OPTS) sample-config/template-object/hosts.cfg $(DESTDIR)$(CFGDIR)/hosts.cfg-sample
-	$(INSTALL) -m 664 $(INSTALL_OPTS) sample-config/template-object/misccommands.cfg $(DESTDIR)$(CFGDIR)/misccommands.cfg-sample
-	$(INSTALL) -m 664 $(INSTALL_OPTS) sample-config/template-object/services.cfg $(DESTDIR)$(CFGDIR)/services.cfg-sample
-	$(INSTALL) -m 664 $(INSTALL_OPTS) sample-config/template-object/timeperiods.cfg $(DESTDIR)$(CFGDIR)/timeperiods.cfg-sample
+	[ -d $(DESTDIR)$(SAMPDIR) ] || ${BSD_INSTALL_DATA_DIR} $(DESTDIR)$(SAMPDIR)
+	${BSD_INSTALL_DATA} sample-config/nagios.cfg $(DESTDIR)$(SAMPDIR)/nagios.cfg-sample
+	${BSD_INSTALL_DATA} sample-config/cgi.cfg $(DESTDIR)$(SAMPDIR)/cgi.cfg-sample
+	${BSD_INSTALL_DATA} sample-config/resource.cfg $(DESTDIR)$(SAMPDIR)/resource.cfg-sample
+	${BSD_INSTALL_DATA} sample-config/template-object/checkcommands.cfg $(DESTDIR)$(SAMPDIR)/checkcommands.cfg-sample
+	${BSD_INSTALL_DATA} sample-config/template-object/contactgroups.cfg $(DESTDIR)$(SAMPDIR)/contactgroups.cfg-sample
+	${BSD_INSTALL_DATA} sample-config/template-object/contacts.cfg $(DESTDIR)$(SAMPDIR)/contacts.cfg-sample
+	${BSD_INSTALL_DATA} sample-config/template-object/dependencies.cfg $(DESTDIR)$(SAMPDIR)/dependencies.cfg-sample
+	${BSD_INSTALL_DATA} sample-config/template-object/escalations.cfg $(DESTDIR)$(SAMPDIR)/escalations.cfg-sample
+	${BSD_INSTALL_DATA} sample-config/template-object/hostgroups.cfg $(DESTDIR)$(SAMPDIR)/hostgroups.cfg-sample
+	${BSD_INSTALL_DATA} sample-config/template-object/hosts.cfg $(DESTDIR)$(SAMPDIR)/hosts.cfg-sample
+	${BSD_INSTALL_DATA} sample-config/template-object/misccommands.cfg $(DESTDIR)$(SAMPDIR)/misccommands.cfg-sample
+	${BSD_INSTALL_DATA} sample-config/template-object/services.cfg $(DESTDIR)$(SAMPDIR)/services.cfg-sample
+	${BSD_INSTALL_DATA} sample-config/template-object/timeperiods.cfg $(DESTDIR)$(SAMPDIR)/timeperiods.cfg-sample
 
 	@echo ""
 	@echo "*** Sample config file installed ***"
