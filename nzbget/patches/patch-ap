$NetBSD: patch-ap,v 1.1 2006/06/10 17:18:26 martijnb Exp $

--- NZBClientServerMessageBase.cpp.orig	2005-09-02 09:00:41.000000000 +0200
+++ NZBClientServerMessageBase.cpp
@@ -40,11 +40,14 @@ const char* g_szMessageRequests[] = { "N
 /*
  * Initializes a message base, filling out the member variables with iRequest, iSize and Id and password
  */
+
+const int Cookie = 0xdecafbad; // Just as bad as 'nzbq', but more portable..
+
 void NZBClientServerMessageBase::InitMessageBase( SNZBMessageBase* pMessageBase, int iRequest, int iSize )
 {
 	const char* szPassword		= g_pOptions->getOption( OPTION_SERVERPASSWORD, NULL );
 
-	pMessageBase->m_iId	= 'nzbg';
+	pMessageBase->m_iId   = Cookie;
 	pMessageBase->m_iType = iRequest;
 	pMessageBase->m_iSize = iSize;
 	
@@ -56,7 +59,7 @@ void NZBClientServerMessageBase::InitMes
  */
 bool NZBClientServerMessageBase::CheckDataIsNZBMessage( SNZBMessageBase* pMessage )
 {
-	return pMessage->m_iId == 'nzbg';
+	return pMessage->m_iId == Cookie;
 }
 
 bool CreateNZBCharBufferFromFilename( const char* szFileName, char** pBuffer, int* pBufferLength )
