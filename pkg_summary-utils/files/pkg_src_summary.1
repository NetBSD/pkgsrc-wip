.\"	$NetBSD: pkg_src_summary.1,v 1.12 2008/09/06 20:31:30 cheusov Exp $
.\"
.\" Copyright (c) 2008 by Aleksey Cheusov (vle@gmx.net)
.\" Absolutely no warranty.
.\"
.Dd Jan 29, 2008
.Dt PKG_SRC_SUMMARY 1
.Sh NAME
.Nm pkg_src_summary
.Nd build summary information for source packages
.Sh SYNOPSIS
.Nm
.Op Ar category1/pkg1 category2/pkg2 ...
.Sh DESCRIPTION
.Nm
builds summary information about source packages specified in
arguments or read from stdin (one package per line).  Format of this
summary information is the same as used in pkg_summary(5) built from
binary packages. List of fields (PKGNAME, PKGPATH, DEPENDS etc.) is
very similar but not fully the same.
.Pp
The options are as follows:
.Bl -tag -width indent
.It Fl h
display help message
.It Fl f Ar fields
A list of fields (separated by space character or comma) to be generated. By
default the following fields are generated: PKGNAME, PKGPATH, DEPENDS,
BUILD_DEPENDS, CONFLICTS, HOMEPAGE, COMMENT, LICENSE, ONLYFOR, NOTFOR,
MAINTAINER, CATEGORIES,
DESCRIPTION (multiline), PLIST(multiline).
The following fields are NOT generated by default: CVS_CHECKSUM.
.It Fl a Ar fields
Add the specified fields to the list of fields generated by default
.It Fl r Ar fields
Remove the specified fields from the list of fields generated by default
.It Fl p
use 'bmake plist' for obtaining PLIST
.It Fl d
generate summary for specified packages and their dependancies (DEPENDS)
.It Fl D
generate summary for specified packages and their dependancies (BUILD_DEPENDS)
.It Fl A
generate summary for specified packages and all their dependancies, that is,
implies -d and -D
.It Fl m
generate summary for all variants of multi-variant packages
(Python {22,23,24,25}, PHP {4,5}, Apache {1.3,2,2.2} etc.)
.El
.Sh ENVIRONMENT
.Bd -literal
.Bl -tag -width Cm
.It Cm PKGSRCDIR
pkgsrc root directory, defaults to /usr/pkgsrc
.It Cm BMAKE
path to pkgsrc friendly make utility, defaults to make
.It Cm PSS_SLAVES
Space separated list of remote hosts or +<Number> for distributed
summary generation. If case of +<Number>, <Number> local processes
are run, this is useful for SMP machines.
.It Cm PSS_TRANSPORT
Transport program like ssh or rsh to communicate with remote/slave hosts.
.It Cm PSS_PPERS
A number of packages per slave that are built at once, defaults to 10.
.It Cm PSS_OPTIONS
This variable specifies default options to be placed in front of
any explicit options.
.El
.Ed
.Sh EXAMPLES
.Bd -literal
pkg_src_summary wip/dict-server wip/dict-mueller7 wip/dict-client
printf 'wip/dict-server\\nwip/dict-client\\n' | pkg_src_summary
env BMAKE=/usr/pkg/bin/bmake \\ 
    PSS_SLAVES='host1 host2' \\ 
    PSS_TRANSPORT=/usr/bin/ssh \\ 
    /usr/pkg/bin/pkg_src_summary \\ 
           -f 'PKGNAME PKGPATH DEPENDS BUILD_DEPENDS' \\ 
           < /tmp/packages.txt \\ 
pkg_list_all_pkgs | env PSS_SLAVES='+6' pkg_src_summary
env PSS_OPTIONS=-p pkg_update_src_summary /path/to/pkg_src_summary.txt
pkg_src_summary -a CVS_CHECKSUM x11/xxkb wip/distbb
pkg_src_summary -r LICENSE,PLIST,DESCR x11/xxkb wip/distbb
pkg_src_summary -m lang/lua www/php-apc www/ap2-python
.Ed
.Sh SEE ALSO
.Xr pkg_summary-utils 7 ,
.Xr pkg_summary 5
.Sh AUTHOR
.An Aleksey Cheusov
.Aq vle@gmx.net
