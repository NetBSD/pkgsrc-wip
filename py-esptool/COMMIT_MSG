py-esptool: Update to 5.0.1

Packaged in wip by Frédéric Fauberteau

pkgsrc changes:
---------------
  * Add patch to break the upstream dependency requirement for click<8.2.0
    since devel/py-click is at 8.2.1
    (https://github.com/espressif/esptool/pull/1104).

upstream changes:
-----------------
v5.0.1 (2025-07-15)
Bug Fixes
  * elf2image: validate ELF section types and addresses before processing
    (Jaroslav Burian - 97a1546)
  * elf2image: handle PREINIT_ARRAY section type in ESP32-P4 elf file properly
    (Jaroslav Burian - ec84a75)
  * elf2image: Fix incorrect logger call (Marek Matej - 637f0e6)

v5.0.0 (2025-07-02)
Breaking changes
  * The .py suffix is deprecated for the following scripts:
    o esptool
    o espefuse
    o espsecure
    o esp_rfc2217_server (Peter Dragun - 635cde1)
  * execute-scripts command is removed (Peter Dragun - ff72b26)
New Features
  * espefuse: Use the esptool logger, more concise messages (Radim Karniš - 983338f)
  * espefuse: Replace execute-scripts with public API (Peter Dragun - ff72b26)
  * espefuse: Add public API for espefuse (Peter Dragun - d7da0f8)
  * espefuse: Rename all commands to use dashes and add tests for deprecated commands (Peter Dragun - ade3088)
  * espefuse: Add support for chaining commands with click parser (Peter Dragun - 0a2ea69)
  * espefuse: Refactor CLI and use click for parsing arguments (Peter Dragun - aa80001)
  * espefuse: Adds efuse calculation fields for ESP32-C5 (Konstantin Kondrashov - 9104038)
  * espefuse: Adds 3-bit field for wafer major version in ESP32-P4 (Konstantin Kondrashov - c102510)
  * verbosity: Allow setting silent or verbose output levels (Radim Karniš - 90e3770)
  * efuse: Adds efuses for ESP32-C61 ECO3 (Konstantin Kondrashov - 6146410)
  * espefuse: Support efuse for ESP32-C5 ECO2 (v1.0) (Konstantin Kondrashov - 3726726)
  * espsecure: Use esptool logger, unify output format of messages (Radim Karniš - 905249c)
  * stub_flasher: Support for >16MB flash on P4 and >16MB encrypted writes on S3 (Radim Karniš - 4e6803e)
  * espsecure: Drop ecdsa module, use cryptography instead (Radim Karniš - e132f6f)
  * espsecure: Unify all commands and options to use dash instead of underscore (Peter Dragun - 36325fd)
  * espsecure: Use rich click for CLI parsing (Peter Dragun - 9c7ddc1)
  * targets: Update chip features lists with more info (Radim Karniš - 3c776aa)
  * logging: Add collapsible output stages and ASCII progress bars (Radim Karniš - f3cf107)
  * trace: Update --trace with more info and more readable formatting (Radim Karniš - 0beee77)
  * cli: Commands and options use dashes instead of underscores for uniformity (Peter Dragun - 3cecd6d)
  * cmds: Expand input of all functions to file paths, bytes, or file-like objects (Radim Karniš - 46a9e31)
  * cmds: Allow all functions to both return bytes and write to files (Radim Karniš - 03b84a1)
  * cmds: Polish the public API, unify arg names, pack some args (Radim Karniš - 37a13a9)
  * cmds: Encapsulate logic for running the stub flasher in run_stub (Radim Karniš - 063d9d5)
  * cli: Add click-based CLI interface (Peter Dragun - d40fefa)
  * cmds: Allow commands to output bytes, as well as write to a file (Radim Karniš - 0153b79)
  * cmds: Rework the public API to work as a Python module (Radim Karniš - ba36933)
  * flash_attach: Encapsulate logic for flash attaching and configuration (Radim Karniš - 6e959ef)
  * esp32h4: update the ESP32H4StubLoader (Chen Jichang - f7c78f8)
  * espefuse: Updates esp32h4 efuse table and fixes tests (Konstantin Kondrashov - 3da8c57)
  * esp32h4: add ESP32H4 esptool support (Chen Jichang - bcf5c6e)
  * esp32h21: Add Microsoft UF2 family ID (Radim Karniš - cb0d334)
  * errors: Print errors to STDERR, catch KeyboardInterrupt (Radim Karniš - 0864e17)
  * write_flash: Remove the superfluous --verify option (Radim Karniš - dbf3d1c)
  * logger: Add a custom logger, allow output redirection (Radim Karniš - 1ce02db)
  * image_info: Deprecate the --version 1 output format (Radim Karniš - 3f625c3)
  * Remove .py suffix from scripts (Peter Dragun - 635cde1)
  * detect flash size of Adesto flash chips (Jaroslav Burian - 0b56f85)
  * Add support for k, M suffix for flash size (Peter Dragun - 6f0d779)
  * Rename reset modes to use dash instead of underscore (Peter Dragun - 851919f)
Bug Fixes
  * logger: Turn on smart features in more cases (Jason2866 - 5d5eafb)
  * elf2image: Multiple fixes from 3rd party frameworks (Sylvio Alves - cbd4e9b)
  * stub_flasher: Fix USB-Serial/JTAG mode on C5 ECO2 and C61 ECO3 (Radim Karniš - 1decf86)
  * write_flash: Detect more cases of unresponsive flash, fix failing flash_size check (Radim Karniš - e6bfc3b)
  * stub_flasher: Fix ESP32-C5 ECO2 flashing (Radim Karniš - 3a4c15c)
  * espefuse: Fix output messages for set_flash_voltage (Peter Dragun - daaedf8)
  * espefuse: JTAG_SEL_ENABLE has GPIO34 strapping pin for ESP32P4 (Jan Beran - 78535e4)
  * esp32c5: fix bootloader address (Jaroslav Burian - ec12073)
  * autodetection: Remove the Unsupported detection protocol stage (Radim Karniš - 05553a4)
  * logging: Unify output messages, notes, and warning formatting (Radim Karniš - 07879eb)
  * elf2image: fix elf2image for ram app when sha256 offset not specified (Jaroslav Burian - 6f8ff39)
  * esp32h4: fix h4 chip feature (Chen Jichang - 955943a)
  * image_info: Sanitize app and bootloader info of null bytes (Radim Karniš - 8016455)
  * lint: Correct type annotations issues reported by mypy (Radim Karniš - 0bca550)
  * esptool: Fix efuse base address for esp32h21 (Konstantin Kondrashov - c3d28ee)
  * elf2image: support --flash-mmu-page-config for all chips (Jaroslav Burian - 8be617c)
  * elf2image: Try to correct MMU page size if not specified (Jaroslav Burian - f4fabc5)
  * elf2image: Print correct MMU page size in error message (Jaroslav Burian - 9da4948)
  * logging: Avoid crashes when flushing if sys.stdout is not available (Radim Karniš - 5176b67)
  * enable auto-detection of ESP32-S2 in secure download mode (Jaroslav Burian - c2f5d21)
  * enable ESP32-P4 ECO5 chip detection (Jaroslav Burian - 0b3460f)
  * Do not use padding for merged IntelHex files (Peter Dragun - 08c170b)
  * lock upper version of click to <8.2.0 (Peter Dragun - 5241cba)
  * Add timeout to read_flash to avoid infinite loops (Peter Dragun - f26a7bb)
  * Close the data file after reading the data (Stevan Stevic - 807d02b)
Documentation
  * elf2image: Link an article with Simple Boot explanation (Radim Karniš - 202dfad)
  * logger: Fix custom logger example code (Radim Karniš - 26e86e9)
  * logger: Fix custom logger example code (Radim Karniš - eaaa6b3)
  * Clarify versions in documentation (Peter Dragun - 4586e4b)
  * Remove .py suffix from tool names (Peter Dragun - e9f03ae)
  * Remove espefuse and espsecure migration guide for esp8266 (Peter Dragun - b6e08a3)
  * Update migration guide for espefuse with click parser (Peter Dragun - faf3e22)
  * Add missing esp32-p4 target to supported targets (Peter Dragun - 8b5a5d9)
  * fix targets dropdown in production (Peter Dragun - 2643101)
  * Update autocomplete docs for click-based CLI (Peter Dragun - 89cfa52)
  * fix minor issues and improve vague statements (Peter Dragun - 6d04155)
Code Refactoring
  * cli_mode: Improve CLI mode workflow code (Radim Karniš - 0671d35)
  * stub_class: Make into a mixin to avoid code repetition (Radim Karniš - 83613c8)
Removals
  * make_image: Remove the make_image command in favor of other workflows (Radim Karniš - 955a7c8)
  * beta_targets: Removed support for beta chip targets (Radim Karniš - 8f1c206)
  * Deprecate Python versions 3.7, 3.8 and 3.9 (Peter Dragun - 19f1bee)

v4.9.0 (2025-06-19)
New Features
  * espefuse: Add eFuses for ESP32-C61 ECO3 (Radim Karniš - 98688ab)
  * espefuse: Support efuse for ESP32-C5 ECO2 (v1.0) (Konstantin Kondrashov - ce16054)
  * stub_flasher: Support for >16MB flash on P4 and >16MB encrypted writes on S3 (Radim Karniš - 0110514)
  * espefuse: Updates esp32h4 efuse table and fixes tests (Konstantin Kondrashov - 777c505)
  * esp32h4: add ESP32H4 esptool support (Chen Jichang - edb99bd)
  * esp32h21: Add Microsoft UF2 family ID (Radim Karniš - 74d27ae)
  * watchdog_reset: Add a new watchdog_reset option working even in USB modes (Radim Karniš - d37c38a)
  * espsecure: Improves an error message for encrypt_flash_data and decrypt_flash_data (Konstantin Kondrashov - ef407ed)
  * espefuse: Clean up efuse code for ESP32H2 (Konstantin Kondrashov - 4e922fe)
  * espefuse: Support different efuse table versions for ESP32H2 (Konstantin Kondrashov - d51ecbe)
  * espefuse: Adds efuses for esp32h2 eco5 (Konstantin Kondrashov - 9b74df6)
  * esp32h21: add ESP32H21 esptool support (gaoxu - 92ceff2)
  * esp32-p4: add support for flasher stub in USB OTG mode (Peter Dragun - 804f2db)
  * esp32-c5: Add ECO1 magic number (Radim Karniš - 6cc002c)
  * esp_rfc2217: Improved the logger message format (Jakub Kocka - 39a12a4)
  * espefuse: Adds 3 bit for PSRAM_CAP efuse field (Konstantin Kondrashov - ab2e0bf)
  * espefuse: Adds API for getting block and wafer versions (Konstantin Kondrashov - 111c6c0)
  * espefuse: Adds ADC calibration data for ESP32-C61 (Konstantin Kondrashov - 36d9735)
  * espefuse: Adds ADC calibration data for ESP32-C5 (Konstantin Kondrashov - a903812)
  * espefuse: Adds ADC calibration data for ESP32-P4 (Konstantin Kondrashov - 215e4b8)
  * erase_region: Enable erasing in ROM bootloader and SDM (Radim Karniš - e0deeac)
  * hard_reset: Support custom hard reset sequence configuration (Radim Karniš - 1b15738)
  * print usb mode when output chip info (Jan Beran - 749d1ad)
  * Add new app description segments (Jaroslav Burian - b23e60f)
  * add filtering based on serial number (Jaroslav Burian - 88319db)
  * Add support for Python 3.13 (Radim Karniš - 6abd05d)
Bug Fixes
  * stub_flasher: Fix USB-Serial/JTAG mode on C5 ECO2 and C61 ECO3 (Radim Karniš - 4382f14)
  * write_flash: Detect more cases of unresponsive flash, fix failing flash_size check (Radim Karniš - f83d598)
  * stub_flasher: Fix ESP32-C5 ECO2 flashing (Radim Karniš - bb237bc)
  * espefuse: Fix output messages for set_flash_voltage (Peter Dragun - 759bcc6)
  * espefuse: JTAG_SEL_ENABLE has GPIO34 strapping pin for ESP32P4 (Jan Beran - f6d1833)
  * esp32c5: fix bootloader address (Jaroslav Burian - 83e0973)
  * elf2image: fix elf2image for ram app when sha256 offset not specified (Radim Karniš - 9fd7b7a)
  * esp32h4: Correct ESP32-H4 chip features (Radim Karniš - 5520963)
  * esp32h21: Fix eFuse base address (Radim Karniš - dc05792)
  * elf2image: support --flash-mmu-page-config for all chips (Jaroslav Burian - 54fdc75)
  * elf2image: Try to correct MMU page size if not specified (Jaroslav Burian - d9afa9c)
  * elf2image: Print correct MMU page size in error message (Jaroslav Burian - 447de60)
  * test: Expect the correct module name for Python's 3.14 argparse (Karolina Surma - 98001b7)
  * write_flash: Skip flash_size checks if we can't read flash size (Radim Karniš - 12095b2)
  * save_segment: Adds segment len check the same as bootloader does (Konstantin Kondrashov - a6bceb7)
  * chip_type_verification: Enable in SDM, do not rely on magic numbers (Radim Karniš - 598e07b)
  * esp32-c6: Disable RTC WDT reset to prevent port disappearing (Radim Karniš - d47004e)
  * esp_rfc2217: Fixed keyboard interrupt on Windows and added info for command (Jakub Kocka - 5569aa5)
  * detect_chip: Select correct loader before further operations to avoid silent failures (Jan Beran - 8897ff8)
  * usb_resets: Fix resetting in USB-OTG and USB-Serial/JTAG modes (Radim Karniš - 8298cdc)
  * Do not use padding for merged IntelHex files (Peter Dragun - 739669f)
  * close port when connect fails (Jaroslav Burian - d99c972)
  * Hide missing app info based on IDF version (Jaroslav Burian - d2bca1e)
  * add delay after WDT reset for better stability (Peter Dragun - 188c162)
  * Not reading app description for some SoCs (Jaroslav Burian - 3555fe1)
  * Fix missing newline in output (Jan Beran - 26b676b)
Documentation
  * esptool: Fix reset sequences in documentation (Jan Beran - 92160eb)
  * flash_modes: Correct QIO GPIO pins for all chips (Radim Karniš - 23f11f0)
  * espefuse: Fixed JTAG strapping pin for ESP32-S3 in the help and documentation (Roland Dobai - de1d1ce)
  * scripting: Add example of usage as a Python module (Radim Karniš - d54e59f)
  * esp8266: change boot select pin to IO0 (ChromaLock - c06ce1e)
  * read_flash_sfdp: Fix command formatting (Radim Karniš - ec309bb)
  * spi_connection: Explain which flash chips are supported (Radim Karniš - 6d37e30)
  * fix targets dropdown in production (Peter Dragun - 9201ccd)
  * Point directly to the datasheet for given target (Jan Beran - a32988e)
  * Add ESP32-C5 and ESP32-C61 docs (Radim Karniš - f52c723)
