# $NetBSD$
#
###########################################################
#                  Generated by fbsd2pkg                  #
#              Fri Nov 30 10:18:37 CST 2018               #
###########################################################

## https://git.skewed.de/count0/graph-tool/wikis/installation-instructions#manual-compilation
## The sparsehash template library (optional, but recommended).
## The GTK+ 3, cairomm, pycairo and matplotlib libraries, used for graph drawing (optional).
# RUN_DEPENDS=	${PYTHON_PKGNAMEPREFIX}scipy>=0.7.0:science/py-scipy@${PY_FLAVOR} \
#		${PYPKGPREFIX}-numpy>=0.7.0:math/py-numpy@${PY_FLAVOR}

DISTNAME=	graph-tool-${PV}
PKGNAME=	${PYPKGPREFIX}-graph-tool-${PV}
CATEGORIES=	graphics
MASTER_SITES=	https://downloads.skewed.de/graph-tool/
EXTRACT_SUFX=	.tar.bz2

MAINTAINER=	pkgsrc-users@NetBSD.org
HOMEPAGE=	https://graph-tool.skewed.de/
COMMENT=	Python module for manipulation and statistical analysis of graphs
LICENSE=	gnu-gpl-v3

# Test and change if necessary.
# MAKE_JOBS_SAFE=	no

USE_TOOLS+=	pkg-config
USE_LANGUAGES=	c c++
GNU_CONFIGURE=	yes

CONFIGURE_ARGS=		--with-boost-python=boost_python27
CONFIGURE_ARGS=		--with-boost-libdir=${PREFIX}/lib
CONFIGURE_ARGS+=	--with-expat=${PREFIX}
CONFIGURE_ARGS+=	--with-numpy=${PREFIX}
CONFIGURE_ARGS+=	--disable-silent-rules

# Why is this necessary?
CXXFLAGS+=	-I${PREFIX}/lib/python${PYVERSSUFFIX}/site-packages/numpy/core/include
CXXFLAGS+=	-Wno-unknown-pragmas
CXXFLAGS+=	-Wno-maybe-uninitialized
CXXFLAGS+=	-std=c++14
# LDFLAGS+=	-L${PREFIX}/lib

PV=		2.27

.include "../../devel/boost-libs/buildlink3.mk"
.include "../../textproc/expat/buildlink3.mk"
.include "../../wip/cgal/buildlink3.mk"
.include "../../math/py-numpy/buildlink3.mk"
.include "../../devel/py-boost/buildlink3.mk"
.include "../../devel/sparsehash/buildlink3.mk"
# Flagged as dep for cairo - maybe need to update cairo bl3?
.include "../../devel/libsigc++/buildlink3.mk"
.include "../../graphics/cairomm/buildlink3.mk"
.include "../../graphics/py-cairo/buildlink3.mk"
.include "../../lang/python/application.mk"
# CentOS doesn't have zlib in the base, so uncomment if needed.
# .include "../../devel/zlib/buildlink3.mk"
.include "../../mk/bsd.pkg.mk"
