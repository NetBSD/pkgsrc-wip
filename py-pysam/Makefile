# $NetBSD$
#
###########################################################
#                  Generated by fbsd2pkg                  #
#              Thu Jul 27 18:54:54 CDT 2023               #
###########################################################

DISTNAME=	pysam-0.21.0
PKGNAME=	${PYPKGPREFIX}-pysam-0.21.0
CATEGORIES=	biology
MASTER_SITES=	${MASTER_SITE_PYPI:=p/pysam/}

OWNER=		bacon@NetBSD.org
HOMEPAGE=	https://github.com/pysam-developers/pysam
COMMENT=	Python module for reading, manipulating and writing genomic data sets
LICENSE=	mit

SUBST_CLASSES+=		rpath
SUBST_STAGE.rpath=	pre-configure
SUBST_SED.rpath=	-e 's|@rpath|${PREFIX}/${PYSITELIB}/pysam|g'
SUBST_FILES.rpath=	cy_build.py

USE_TOOLS+=	gmake
MAKE_ENV+=	HTSLIB_MODE=external \
		HTSLIB_LIBRARY_DIR=${PREFIX}/lib \
		HTSLIB_INCLUDE_DIR=${PREFIX}/include
MAKE_ENV+=	LD_LIBRARY_PATH=${WRKSRC}/build/lib.netbsd-9.3-amd64-cpython-310/pysam/
LDFLAGS+=	${COMPILER_RPATH_FLAG}${PREFIX}/${PYSITELIB}/pysam

.include "../../lang/python/egg.mk"
.include "../../biology/htslib/buildlink3.mk"
.include "../../devel/py-cython/tool.mk"
.include "../../devel/zlib/buildlink3.mk"
.include "../../mk/bsd.pkg.mk"
