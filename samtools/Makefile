# $NetBSD: Makefile,v 1.1 2014/09/04 21:46:49 outpaddling Exp $

###########################################################
#               Generated by fbsd2pkg                     #
###########################################################

###################################
# Unconverted FreeBSD port syntax:

# # Created by: Jason Bacon <bacon@sculpin.jbacon.dyndns.org>
# # $FreeBSD$
# # FIXME: Check complete deps
# # Just for speed: Recent GCC has better optimizer
# USE_GCC=	yes
# USES=	shebangfix
# SHEBANG_FILES=	misc/*.pl
# # FIXME: Find expl and logl somewhere to avoid reducing precision
# post-patch:
# 	${REINPLACE_CMD} -e 's|expl|exp|g' -e 's|logl|log|g' \
# 		${WRKSRC}/errmod.c ${WRKSRC}/bcftools/prob1.c
# 	${REINPLACE_CMD} -e "s|/software/bin/python|${LOCALBASE}/bin/python|g" \
# 		${WRKSRC}/misc/*.py
# .include <bsd.port.mk>

DISTNAME=	samtools-0.1.19
CATEGORIES=	biology
MASTER_SITES=	${MASTER_SITE_SOURCEFORGE:=samtools/}
EXTRACT_SUFX=	.tar.bz2

MAINTAINER=	jwbacon@tds.net

COMMENT=	Generic format for storing large nucleotide sequence alignments
# LICENSE=	

# Pessimistic assumption.  Test and change if possible.
MAKE_JOBS_SAFE=	no

# Just assuming C and C++: Adjust this!
USE_LANGUAGES=	c c++
USE_TOOLS+=	 gmake perl

do-build:
	cd ${WRKSRC} && ${MAKE_PROGRAM}  all-recur razip

do-install:
	${MKDIR} ${DESTDIR}${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKSRC}/samtools ${DESTDIR}${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKSRC}/razip ${DESTDIR}${PREFIX}/bin
	${INSTALL_PROGRAM} ${WRKSRC}/bcftools/bcftools ${DESTDIR}${PREFIX}/bin
.for f in ace2sam bamcheck maq2sam-long maq2sam-short md5fa md5sum-lite wgsim
	${INSTALL_PROGRAM} ${WRKSRC}/misc/${f} ${DESTDIR}${PREFIX}/bin
.endfor
	${INSTALL_SCRIPT} ${WRKSRC}/misc/*.pl ${WRKSRC}/misc/plot-bamcheck \
		${DESTDIR}${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/misc/*.py ${DESTDIR}${PREFIX}/bin
	${INSTALL_SCRIPT} ${WRKSRC}/misc/*.lua ${DESTDIR}${PREFIX}/bin
	${MKDIR} ${DESTDIR}${PREFIX}/lib
	${INSTALL_DATA} ${WRKSRC}/libbam.a ${DESTDIR}${PREFIX}/lib
	${MKDIR} ${DESTDIR}${PREFIX}/man/man1
	${INSTALL_MAN} ${WRKSRC}/samtools.1 ${DESTDIR}${PREFIX}/man/man1
	${MKDIR} ${DESTDIR}${PREFIX}/include/bam
	${INSTALL_DATA} ${WRKSRC}/*.h ${DESTDIR}${PREFIX}/include/bam

# Guess based on FreeBSD USE_PYTHON_RUN=yes
.include "../../lang/python/application.mk"
.include "../../devel/zlib/buildlink3.mk"
.include "../../devel/ncurses/buildlink3.mk"
.include "../../mk/bsd.pkg.mk"
