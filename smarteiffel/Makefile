# $NetBSD: Makefile,v 1.1.1.1 2004/10/30 21:30:12 larnor Exp $

DISTNAME=	se
PKGNAME=	SmartEiffel-2.0
CATEGORIES=	lang
MASTER_SITES=	ftp://ftp.loria.fr/pub/loria/SmartEiffel/
EXTRACT_SUFX=	.tar.bz2

MAINTAINER=	lars.nordlund@hem.utfors.se
HOMEPAGE=	http://smarteiffel.loria.fr/
COMMENT=	The GNU Eiffel Compiler

WRKSRC=		${WRKDIR}/SmartEiffel

MAKE_ENV=	SmartEiffel=${WRKSRC}/sys/system.se
ALL_TARGET=	all

post-patch:
	${SED} "s:XXXWORKDIRXXX:${WRKDIR}:g" ${FILESDIR}/system.se \
		> ${WRKSRC}/sys/system.se

post-build:
	${MV} -f ${WRKSRC}/sys/system.se ${WRKSRC}/sys/system.se.bak
	${SED} "s:${WRKDIR}:${LOCALBASE}:g" ${WRKSRC}/sys/system.se.bak > \
		${WRKSRC}/sys/system.se
	${RM} -f ${WRKSRC}/sys/system.se.bak
	${RM} -f ${WRKSRC}/sys/system.se~

do-install:
	${CP} -r ${WRKSRC} ${LOCALBASE}

#post-install:

.include "../../mk/bsd.pkg.mk"
