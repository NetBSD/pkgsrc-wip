$NetBSD: patch-ab,v 1.2 2005/06/20 07:00:36 marmfield Exp $

--- smbldap_tools.pm.orig	2005-05-31 18:49:26.000000000 +1000
+++ smbldap_tools.pm
@@ -31,20 +31,20 @@ use Crypt::SmbHash;
 # ugly funcs using global variables and spawning openldap clients
 
 my $smbldap_conf;
-if (-e "/etc/smbldap-tools/smbldap.conf") {
-	$smbldap_conf="/etc/smbldap-tools/smbldap.conf";
+if (-e "@PREFIX@/etc/smbldap-tools/smbldap.conf") {
+	$smbldap_conf="@PREFIX@/etc/smbldap-tools/smbldap.conf";
 } else {
 	$smbldap_conf="/etc/opt/IDEALX/smbldap-tools/smbldap.conf";
 }
 my $smbldap_bind_conf;
-if (-e "/etc/smbldap-tools/smbldap_bind.conf") {
-	$smbldap_bind_conf="/etc/smbldap-tools/smbldap_bind.conf";
+if (-e "@PREFIX@/etc/smbldap-tools/smbldap_bind.conf") {
+	$smbldap_bind_conf="@PREFIX@/etc/smbldap-tools/smbldap_bind.conf";
 } else {
 	$smbldap_bind_conf="/etc/opt/IDEALX/smbldap-tools/smbldap_bind.conf";
 }
 my $samba_conf;
-if (-e "/etc/samba/smb.conf") {
-	$samba_conf="/etc/samba/smb.conf";
+if (-e "@PREFIX@/etc/samba/smb.conf") {
+	$samba_conf="@PREFIX@/etc/samba/smb.conf";
 } else {
 	$samba_conf="/usr/local/samba/lib/smb.conf";
 }
@@ -498,9 +498,9 @@ sub add_posix_machine
 										   'uid'   => "$user",
 										   'uidNumber'   => "$uid",
 										   'gidNumber'   => "$gid",
-										   'homeDirectory'   => '/dev/null',
-										   'loginShell'   => '/bin/false',
-										   'description'   => 'Computer',
+										   'homeDirectory'   => '/nonexistant',
+										   'loginShell'   => '/sbin/nologin',
+										   'description'   => 'Samba machine account',
                                                                                   'gecos'   => 'Computer',
 										  ]
 								);
