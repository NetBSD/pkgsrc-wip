$NetBSD: patch-an,v 1.1.1.1 2006/06/01 12:03:23 lkundrak Exp $

--- src/sysjail.c.orig	2006-05-07 16:23:03.000000000 +0200
+++ src/sysjail.c
@@ -31,7 +31,11 @@
 #include <sys/param.h>
 #include <sys/types.h>
 #include <sys/wait.h>
+#ifdef __NetBSD__
+#include <systrace.h>
+#else
 #include <dev/systrace.h>
+#endif
 
 #include <assert.h>
 #include <err.h>
@@ -423,6 +427,7 @@ systrace_init(int *sfd)
 	if ((fd = open("/dev/systrace", O_RDONLY, 0)) == -1) {
 		rep_error("open: /dev/systrace");
 	}
+#ifndef __NetBSD__
 	if (ioctl(fd, STRIOCCLONE, sfd) == -1) {
 		rep_error("ioctl: STRIOCCLONE");
 		if (close(fd) == -1) {
@@ -430,6 +435,7 @@ systrace_init(int *sfd)
 		}
 		return(-1);
 	}
+#endif
 	if (close(fd) == -1) {
 		rep_error("close: /dev/systrace");
 		if (close(*sfd)) {
