# $NetBSD$
#
###########################################################
#                  Generated by fbsd2pkg                  #
#              Tue Sep 13 12:49:29 CDT 2016               #
###########################################################

# FIXME: Searches /usr/local/include before /usr/local/include/PacBio
# so it will pick up the wrong seqan headers if biology/seqan is installed.
# Hopefully PacBio's seqan patches will be in the next seqan release.

DISTNAME=	unanimity-${PORTVERSION}
CATEGORIES=	biology
MASTER_SITES=	${MASTER_SITE_GITHUB:=PacificBiosciences/}
GITHUB_PROJECT=	unanimity
GITHUB_TAG=	054c59530f7ee7c3ce0adde4524f367e8d0244cd

MAINTAINER=	bacon@NetBSD.org
HOMEPAGE=	https://github.com/PacificBiosciences/unanimity
COMMENT=	Consensus library and applications
LICENSE=	modified-bsd

MAKE_JOBS_SAFE=	yes

USE_LANGUAGES=	c c++
USE_CMAKE=	yes
GCC_REQD=	4.9	# 4.8 would do, but pbcopper requires 4.9 for json
CMAKE_ARGS=	-DHTSLIB_INCLUDE_DIRS:STRING=${PREFIX}/include/htslib \
		-DHTSLIB_LIBRARIES:STRING="-L${PREFIX}/lib -lhts" \
		-DPacBioBAM_INCLUDE_DIRS:STRING=${PREFIX}/include/pbbam \
		-DPacBioBAM_LIBRARIES:STRING="-L${PREFIX}/lib -lpbbam" \
		-DSEQAN_INCLUDE_DIRS:STRING=${PREFIX}/include/PacBio \
		-Dpbcopper_INCLUDE_DIRS=${PREFIX}/include \
		-Dpbcopper_LIBRARIES="-L${PREFIX}/lib -lpbcopper"

CXXFLAGS+=	-O2

# Why is this needed with openssl/buildlink3.mk?
LDFLAGS+=	-lssl

WRKSRC=		${WRKDIR}/unanimity-${GITHUB_TAG}

PORTVERSION=	2016.09.13

.include "../../wip/pbseqan/buildlink3.mk"
.include "../../wip/pbbam/buildlink3.mk"
.include "../../wip/pbcopper/buildlink3.mk"
.include "../../wip/htslib/buildlink3.mk"
.include "../../devel/boost-libs/buildlink3.mk"
.include "../../security/openssl/buildlink3.mk"
.include "../../lang/python/application.mk"
.include "../../mk/bsd.pkg.mk"
