$NetBSD: patch-ad,v 1.1 2004/04/01 10:16:37 jeremy-c-reed Exp $
http://lists.ibiblio.org/pipermail/sm-discuss/2004-January/005086.html
http://www.ece.cmu.edu/~rholzer/cryptoloop/util-linux-2.12-kernel-2.6.patch

--- disk-utils/elvtune.c.orig	2002-03-08 14:57:49.000000000 -0800
+++ disk-utils/elvtune.c
@@ -26,6 +26,8 @@
 #include <sys/ioctl.h>
 #include <unistd.h>
 #include <stdlib.h>
+#include <linux/version.h>
+
 #include "nls.h"
 
 /* this has to match with the kernel structure */
@@ -37,8 +39,13 @@ typedef struct blkelv_ioctl_arg_s {
 	int max_bomb_segments;
 } blkelv_ioctl_arg_t;
 
+#if LINUX_VERSION_CODE < KERNEL_VERSION(2, 6, 0)
 #define BLKELVGET   _IOR(0x12,106,sizeof(blkelv_ioctl_arg_t))
 #define BLKELVSET   _IOW(0x12,107,sizeof(blkelv_ioctl_arg_t))
+#else
+#define BLKELVGET   _IOR(0x12,106,blkelv_ioctl_arg_t)
+#define BLKELVSET   _IOW(0x12,107,blkelv_ioctl_arg_t)
+#endif
 
 static void
 usage(void) {
