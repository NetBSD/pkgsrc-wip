# $NetBSD$
#
###########################################################
#               Generated by fbsd2pkg                     #
###########################################################

DISTNAME=	vcflib-${PORTVERSION}
CATEGORIES=	biology
MASTER_SITES=	${MASTER_SITE_GITHUB:=outpaddling/}
GITHUB_TAG=	${PORTVERSION}

MAINTAINER=	bacon@NetBSD.org
HOMEPAGE=	http://example.com
COMMENT=	C++ library and CLI tools for parsing and manipulating VCF files
LICENSE=	mit

# Test and change if necessary.
# MAKE_JOBS_SAFE=	no

# Just assuming C and C++: Adjust this!
USE_LANGUAGES=	c c++
USE_TOOLS+=	gmake
# FreeBSD's SHEBANG_FILES may include bash, perl, python, etc.
# I don't know which is which, so you'll have to finish.
# Add bash, etc. to USE_TOOLS if used below.
# 
# REPLACE_SH=	
# REPLACE_BASH=	
# REPLACE_CSH=	
# REPLACE_KSH=	
# REPLACE_PERL=	
# REPLACE_PYTHON=	

CXXFLAGS+=	-I${LOCALBASE}/include/smithwaterman \
 		-I${LOCALBASE}/include/multichoose \
 		-I${LOCALBASE}/include/filevercmp \
 		-I${LOCALBASE}/include/fastahack \
 		-I${LOCALBASE}/include/intervaltree
MAKE_FILE=	Makefile.external-libs
INSTALL_TARGET=	install-strip

# PORTVERSION=	6451cf639cc7d735137218c4b08f597ba9dd6e73
PORTVERSION=	790904320065e603c6af5b8a32f635134354467c
DATADIR=	${PREFIX}/share/vcflib
DOCSDIR=	${PREFIX}/share/doc/vcflib

#SUBST_CLASSES+=	ldflags
#SUBST_FILES.ldflags=	${WRKSRC}/Makefile.external-libs
#SUBST_STAGE.ldflags=	post-patch
#SUBST_SED.ldflags=	-e "s|LDFLAGS =|LDFLAGS = ${COMPILER_RPATH_FLAG}${PREFIX}/lib|g"

LDFLAGS+=	${COMPILER_RPATH_FLAG}${PREFIX}/lib

#MAKE_FLAGS=	LIB_PATH+=${COMPILER_RPATH_FLAG}${PREFIX}/lib

# Sets OPSYS, OS_VERSION, MACHINE_ARCH, etc..
.include "../../mk/bsd.prefs.mk"

# GCC disables sse2 by default on i386, but it's required for vcflib
.if ${MACHINE_ARCH} == i386
CFLAGS+=	-msse2
.endif

.include "../../wip/htslib/buildlink3.mk"
.include "../../wip/tabixpp/buildlink3.mk"
.include "../../wip/smithwaterman/buildlink3.mk"
.include "../../wip/fastahack/buildlink3.mk"
.include "../../wip/filevercmp/buildlink3.mk"
.include "../../wip/fsom/buildlink3.mk"
.include "../../wip/multichoose/buildlink3.mk"
.include "../../wip/intervaltree/buildlink3.mk"
.include "../../devel/zlib/buildlink3.mk"
.include "../../mk/bsd.pkg.mk"
