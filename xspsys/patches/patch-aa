$NetBSD: patch-aa,v 1.1 2006/10/23 06:04:38 kcf Exp $

--- Makefile.orig	2005-12-14 16:49:08.000000000 -0500
+++ Makefile
@@ -72,63 +72,32 @@
 
 ### system dependent definitions ###
 
-#CC=gcc
-CC=`type gcc cc 2>/dev/null | grep -v "not found" | head -1 | sed -e "s/.* //"` 
-#						# cc
-#AR=/usr/ccs/bin/ar
-AR=`type /usr/ccs/bin/ar ar 2>/dev/null | grep -v "not found" | head -1 | sed -e "s/.* //"` 
-#						# archiver
-#AWK=gawk
-AWK=`type gawk nawk awk 2>/dev/null | grep -v "not found" | head -1 | sed -e "s/.* //"` 
-#						# awk
-#
-#MAKE=gmake
-MAKE=`type gmake make 2>/dev/null | grep -v "not found" | head -1 | sed -e "s/.* //"` 
-#						# make
-#
-
-#UNAME=
-#						# init with the result of the
-#						# shell command "uname"
-
-SEMUN=0
-#						# set 1 if semctl() needs union
-#                                               # e.g. at SUN/Solaris
-
-### importing shell variables for default parameter setting ###
-
-BITMODE=32
-#BITMODE=64
-#						# set to either 32 or 64
-#						# for 32/64 bit support
 
 #SUBDIR=xsp/
 #						# optional subdir
 #						# must not defined as "/" only
 
-TARGETDIR=/usr2/js
+TARGETDIR=.
 #						# user specific install base dir
-MODULE=xspsys
 #						# module (e.g. for cvs)
-PWD=$(TARGETDIR)/$(SUBDIR)$(MODULE)
-##PWD=.
+PWD=.
 #                                               # home directory
 
 ### root dir of java core classes ###
 
-XSPJAVASYSDIR=../xspjsys
+#XSPJAVASYSDIR=../xspjsys
 #						# java interface directory
 ### root dir of applications ###
 
 XSPAPPDIR=../xspapp
 #						# application dir
-XSPJAVADIR=../xspjava
+#XSPJAVADIR=../xspjava
 #						# java application dir
 
 
 ### XSPD/XSP runtime config file ###
 
-CONFIGFILE=$(TARGETDIR)/$(SUBDIR)html/test/xspd.conf
+CONFIGFILE=$(TARGETDIR)/xspd.conf
 #						# config file
 #						# NOTE: must be same path as
 #						# $(INSTALLDIR)
@@ -142,7 +111,7 @@ ETCDIR=$(PWD)/etc
 
 NOREADYMSG=0
 #						# do not echo ready message
-BELL=`echo 0$(QUIET) | sed -e "s/.*1//" -e "s/0.*//"`
+BELL=`${ECHO} 0$(QUIET) | sed -e "s/.*1//" -e "s/0.*//"`
 #						# bell at ready message
 #						# call like "make QUIET=1"
 
@@ -182,7 +151,7 @@ CDOC_IF_DIR=$(HOMEDIR)/doc
 #						# C interface documentation dir
 CDOC_CORE_DIR=$(HOMEDIR)/doc_core
 #						# core documentation dir
-INSTALLDIR=$(TARGETDIR)/$(SUBDIR)html/test
+INSTALLDIR=$(TARGETDIR)
 #						# installation directory
 
 XSPDIR=$(TARGETDIR)/$(SUBDIR)html/test
@@ -216,24 +185,12 @@ DISTRDIR=$(HOMEDIR)/backupdistr
 INTERNETDIR=$(HOMEDIR)/internetdistr
 #						# internet distribution dir
 
-TMPDIR=$(HOME)/tmpdir
+TMPDIR=./tmpdir
 #						# temporary directory
 TMPFILE=$(TMPDIR)/tmpmk_
 #						# prename of temporary files
 
 #						# compiler dependent flags 
-CFLAGSX=-g -O
-##CFLAGSX=-O3 -funroll-loops
-#						# C-flags Linux Red Hat 7.3,
-#						# Red Hat 8.0, or Fedora FC3
-##CFLAGSX=-R suppress,CFE1111,CFE1177,CFE1186,CFE1995,CFE1178,CFE1180,CFE1550,CFE1676 -g
-#						# C-flags reliant unix
-##CFLAGSX=-mcpu=v9 -m$(BITMODE) -g -O
-#						# C-flags SUN, gcc, 32/64-bit
-##CFLAGSX=-xtarget=ultra3 -Xt -erroff=E_NO_IMPLICIT_DECL_ALLOWED -xnativeconnect=interfaces -g -O
-#						# C-flags SUN, SUN-cc, 32-bit
-##CFLAGSX=-mcpu=i386 -m$(BITMODE) -g -O -DFD_SETSIZE=1024
-#						# C-flags NetBSD, pentium
 
 CFLAGS=$(CFLAGSX) -I$(INCL) -I$(INCLCOMMON) -I$(INCLXSP) -I$(INCLADM) \
 	-DOSTYPE=$OSTYPE -DUNAME=$(UNAME) \
@@ -251,21 +208,9 @@ CFLAGS=$(CFLAGSX) -I$(INCL) -I$(INCLCOMM
 #						# -DCOLORCHK=1      1/0
 #						# -DVHASHTABNAM=0   1/0
 
-#						# flags for cc-link option
-CLDFLAGS=-lcrypt
-#						# link-flags Linux Red Hat 7.3,
-#						# Red Hat 8.0, or Fedora FC3
-##CLDFLAGS=-lcrypt -lxnet
-#						# link-flags Reliant Unix
-##CLDFLAGS=-lcrypt -lxnet -mcpu=v9 -m$(BITMODE)
-#						# link-flags SUN, gcc, 32/64-bit
-##CLDFLAGS=-lcrypt -lxnet -xtarget=ultra3
-#						# link-flags SUN, cc, 32-bit
-##CLDFLAGS=-lcrypt -mpcu=i386 -m$(BITMODE)
-#						# link-flags NetBSD, pentium
 
-XHTMLPP=`( [ -x $(ETCDIR)/xhtmlpp ] && echo $(ETCDIR)/xhtmlpp ) \
-	|| ( [ -x $(UTILDIR)/xhtmlpp ] && echo $(UTILDIR)/xhtmlpp )`
+XHTMLPP=`( [ -x $(ETCDIR)/xhtmlpp ] && ${ECHO} $(ETCDIR)/xhtmlpp ) \
+	|| ( [ -x $(UTILDIR)/xhtmlpp ] && ${ECHO} $(UTILDIR)/xhtmlpp )`
 #						# HTML preprocessor
 
 #BIT7=-bit7
@@ -319,13 +264,13 @@ CORE_HEADER='<b>XSPD/XSP Core Documentat
 	    export OUTP MSG ; \
 	fi ; \
 	test -f $< && \
-	echo " preprocessing `basename $< | sed -e 's/\..*//'`.hxsp -> `basename $< | sed -e 's/\..*//'`.h $$MSG"; \
+	${ECHO} " preprocessing `basename $< | sed -e 's/\..*//'`.hxsp -> `basename $< | sed -e 's/\..*//'`.h $$MSG"; \
 	$(XHTMLPP) \
 		-d1 '<%' -d2 '%>' \
 		-c $(BIT7) -O -zz $$OUTP \
-		<`echo $< | sed -e 's/\..*//'`.hxsp \
+		<`${ECHO} $< | sed -e 's/\..*//'`.hxsp \
 		>$(TMPDIR)/`basename $<  | sed -e 's/\..*//'`.h
-	@[ -s $(TMPDIR)/`basename $< | sed -e 's/\..*//'`.h ] && mv $(TMPDIR)/`basename $< | sed -e 's/\..*//'`.h `echo $< | sed -e 's/\..*//'`.h
+	@[ -s $(TMPDIR)/`basename $< | sed -e 's/\..*//'`.h ] && mv $(TMPDIR)/`basename $< | sed -e 's/\..*//'`.h `${ECHO} $< | sed -e 's/\..*//'`.h
 
 ### NOTE: special xhtmlpp preprocessing for all admin pages with name like
 ###       adm---.hxsp, they will get the output mode "-cb ocbp" for
@@ -507,14 +452,14 @@ CDOC_CORE_FILES=\
 .DONE:
 
 .FAILED:
-	@test $(NOREADYMSG) -eq 1 || echo "$(BELL)	*** some errors ***"
+	@test $(NOREADYMSG) -eq 1 || ${ECHO} "$(BELL)	*** some errors ***"
 
 ################################################################################
 
 ### targets ###
 
 install: \
-	mkdirs \
+	${MKDIR}s \
 	$(CVSMAKEFILE) mkcvs \
 	all \
 	helpdoc \
@@ -524,8 +469,8 @@ install: \
 	xspjsys \
 	xspapp \
 	xspjava
-	@cp $(EXEDIR)/xspd $(INSTALLDIR)/xspd
-	@test $(NOREADYMSG) -eq 1 || echo "$(BELL)	--- install `basename \`pwd\`` ready ---"
+	@${CP} $(EXEDIR)/xspd $(INSTALLDIR)/xspd
+	@test $(NOREADYMSG) -eq 1 || ${ECHO} "$(BELL)	--- install `basename \`pwd\`` ready ---"
 
 ################################################################################
 
@@ -561,7 +506,7 @@ all:	\
 	$(XSPDIR)/xspfwd \
 	$(EXEDIR)/xspd \
 	$(XSPDIR)/xspanalyze
-	@test $(NOREADYMSG) -eq 1 || echo "$(BELL)	--- make `basename \`pwd\`` ready ---"
+	@test $(NOREADYMSG) -eq 1 || ${ECHO} "$(BELL)	--- make `basename \`pwd\`` ready ---"
 
 ################################################################################
 
@@ -577,12 +522,12 @@ backup: \
 	@gzip -f $(TMPDIR)/backup_$(MODULE)_tar
 	@(cd $(TMPDIR); ls backup_$(MODULE)_tar.gz | cpio -pdvm /mnt/floppy)
 	@umount /dev/fd0; sync; sync
-	@test $(NOREADYMSG) -eq 1 || echo "$(BELL)	--- backup `basename \`pwd\`` ready ---"
-	@##echo "insert next floppy, ready? "; read YN
+	@test $(NOREADYMSG) -eq 1 || ${ECHO} "$(BELL)	--- backup `basename \`pwd\`` ready ---"
+	@##${ECHO} "insert next floppy, ready? "; read YN
 	@if [ "$(XSPJAVASYSDIR)" != "" ]; then (sleep 2; cd $(XSPJAVASYSDIR); $(MAKE) backup); fi
 	@if [ "$(XSPAPPDIR)" != "" ]; then (sleep 2; cd $(XSPAPPDIR); $(MAKE) backup); fi
 	@if [ "$(XSPJAVADIR)" != "" ]; then (sleep 2; cd $(XSPJAVADIR); $(MAKE) backup); fi
-	@echo "Checking ..."
+	@${ECHO} "Checking ..."
 	@mount /dev/fd0 /mnt/floppy
 	@for FIL in /mnt/floppy/backup*.gz \
 	 ; do \
@@ -596,14 +541,14 @@ diskbackup: \
 	xspd_conf_distr \
 	helpdoc
 	@mount /dev/hda3 /mnt/dos/c
-	@mkdir -p /mnt/dos/c/usr/js/xsp_backup
+	@${MKDIR} -p /mnt/dos/c/usr/js/xsp_backup
 	@ls \
 	    $(BACKUP_FILES) \
 	    $(HELPDOC_FILES) \
 	    | cpio -pdvm /mnt/dos/c/usr/js/xsp_backup
 	@sync; sync
 	@umount /dev/hda3; sync; sync
-	@test $(NOREADYMSG) -eq 1 || echo "$(BELL)	--- backup `basename \`pwd\`` ready ---"
+	@test $(NOREADYMSG) -eq 1 || ${ECHO} "$(BELL)	--- backup `basename \`pwd\`` ready ---"
 	@if [ "$(XSPJAVASYSDIR)" != "" ]; then (cd $(XSPJAVASYSDIR); $(MAKE) diskbackup); fi
 	@if [ "$(XSPAPPDIR)" != "" ]; then (cd $(XSPAPPDIR); $(MAKE) diskbackup); fi
 	@if [ "$(XSPJAVADIR)" != "" ]; then (cd $(XSPJAVADIR); $(MAKE) diskbackup); fi
@@ -613,9 +558,9 @@ diskbackup: \
 tarbackup: \
 	xspd_conf_distr
 	@xold $(BACKUPDIR)/backup_`date '+%y%m%d'`.tar 2>/dev/null
-	-@mkdir -p $(BACKUPDIR) 2>/dev/null
+	-@${MKDIR} -p $(BACKUPDIR) 2>/dev/null
 	@tar cfbv $(BACKUPDIR)/backup_`date '+%y%m%d'`.tar 20 `ls $(BACKUP_FILES) | sed -e "s%^$(PWD)/*%%g"`
-	@test $(NOREADYMSG) -eq 1 || echo "$(BELL)	--- tar backup ready: $(BACKUPDIR)/backup_`date '+%y%m%d'`.tar ---"
+	@test $(NOREADYMSG) -eq 1 || ${ECHO} "$(BELL)	--- tar backup ready: $(BACKUPDIR)/backup_`date '+%y%m%d'`.tar ---"
 	@if [ "$(XSPJAVASYSDIR)" != "" ]; then (cd $(XSPJAVASYSDIR); $(MAKE) tarbackup); fi
 	@if [ "$(XSPAPPDIR)" != "" ]; then (cd $(XSPAPPDIR); $(MAKE) tarbackup); fi
 	@if [ "$(XSPJAVADIR)" != "" ]; then (cd $(XSPJAVADIR); $(MAKE) tarbackup); fi
@@ -628,11 +573,11 @@ distribution: \
 	-@rm -f /mnt/floppy/xspsys_[0-9][0-9][0-9][0-9][0-9][0-9]_tar.*
 	@tar cfbv $(DISTRDIR)/xspsys_`date '+%y%m%d'`_tar 20 `ls $(BACKUP_FILES) | sed -e "s%^$(PWD)/*%%"`
 	@gzip -f $(DISTRDIR)/xspsys_`date '+%y%m%d'`_tar
-	@cp $(DISTRDIR)/xspsys_`date '+%y%m%d'`_tar.gz /mnt/floppy
-	@echo "distribution file: /mnt/floppy/xspsys_`date '+%y%m%d'`_tar.gz"
+	@${CP} $(DISTRDIR)/xspsys_`date '+%y%m%d'`_tar.gz /mnt/floppy
+	@${ECHO} "distribution file: /mnt/floppy/xspsys_`date '+%y%m%d'`_tar.gz"
 	@umount /dev/fd0; sync; sync
 	@if [ "$(CDOC_IF_DIR)" != "" ]; then $(MAKE) distribution_doc; fi
-	@##echo "insert next floppy, ready? "; read YN
+	@##${ECHO} "insert next floppy, ready? "; read YN
 	@if [ "$(XSPJAVASYSDIR)" != "" ]; then (cd $(XSPJAVASYSDIR); $(MAKE) distribution); fi
 	@if [ "$(XSPAPPDIR)" != "" ]; then (cd $(XSPAPPDIR); $(MAKE) distribution); fi
 	@if [ "$(XSPJAVADIR)" != "" ]; then (cd $(XSPJAVADIR); $(MAKE) distribution); fi
@@ -646,8 +591,8 @@ distribution_doc: \
 	-@rm -f /mnt/floppy/xspsysdoc_[0-9][0-9][0-9][0-9][0-9][0-9]_tar.*
 	@(cd $(CDOC_IF_DIR); tar cfbv $(DISTRDIR)/xspsysdoc_`date '+%y%m%d'`_tar 20 . )
 	@gzip -f $(DISTRDIR)/xspsysdoc_`date '+%y%m%d'`_tar
-	@cp $(DISTRDIR)/xspsysdoc_`date '+%y%m%d'`_tar.gz /mnt/floppy/xspsysdoc_`date '+%y%m%d'`_tar.gz
-	@echo "distribution file: /mnt/floppy/xspsysdoc_`date '+%y%m%d'`_tar.tgz"
+	@${CP} $(DISTRDIR)/xspsysdoc_`date '+%y%m%d'`_tar.gz /mnt/floppy/xspsysdoc_`date '+%y%m%d'`_tar.gz
+	@${ECHO} "distribution file: /mnt/floppy/xspsysdoc_`date '+%y%m%d'`_tar.tgz"
 	@umount /dev/fd0; sync; sync
 
 ################################################################################
@@ -658,23 +603,23 @@ internet: \
 	-@umount /dev/hda3; sync; sync
 	@tar cfbv $(INTERNETDIR)/xspsys_`date '+%y%m%d'`.tar 20 `ls $(BACKUP_FILES) | sed -e "s%^$(PWD)/*%%"`
 	@mount /dev/hda3 /mnt/dos/c
-	@mkdir -p /mnt/dos/c/usr/js/xsp_internetdistr
-	@cp $(INTERNETDIR)/xspsys_`date '+%y%m%d'`.tar /mnt/dos/c/usr/js/xsp_internetdistr/xspsys_`date '+%y%m%d'`.tar
-	@echo "distribution file: c:/usr/js/xsp_internetdistr/xspsys_`date '+%y%m%d'`.tar"
+	@${MKDIR} -p /mnt/dos/c/usr/js/xsp_internetdistr
+	@${CP} $(INTERNETDIR)/xspsys_`date '+%y%m%d'`.tar /mnt/dos/c/usr/js/xsp_internetdistr/xspsys_`date '+%y%m%d'`.tar
+	@${ECHO} "distribution file: c:/usr/js/xsp_internetdistr/xspsys_`date '+%y%m%d'`.tar"
 	@umount /dev/hda3; sync; sync
 	@if [ "$(CDOC_IF_DIR)" != "" ]; then $(MAKE) internet_doc; fi
 	@if [ "$(XSPJAVASYSDIR)" != "" ]; then (cd $(XSPJAVASYSDIR); $(MAKE) internet); fi
 	@if [ "$(XSPAPPDIR)" != "" ]; then (cd $(XSPAPPDIR); $(MAKE) internet); fi
 	@if [ "$(XSPJAVADIR)" != "" ]; then (cd $(XSPJAVADIR); $(MAKE) internet); fi
 	@mount /dev/hda3 /mnt/dos/c
-	@cp $(DOCDIR)/Readme.html /mnt/dos/c/usr/js/xsp_internet/xsp/doc/Readme.html
-	@cp $(PWD)/Readme.txt /mnt/dos/c/usr/js/xsp_internetdistr/Readme.txt
-	@cp $(DOCDIR)/Readme.html /mnt/dos/c/usr/js/xsp_internetdistr/Readme.html
-	@cp $(ETCDIR)/xspdinstall /mnt/dos/c/usr/js/xsp_internetdistr/xspdinstall
+	@${CP} $(DOCDIR)/Readme.html /mnt/dos/c/usr/js/xsp_internet/xsp/doc/Readme.html
+	@${CP} $(PWD)/Readme.txt /mnt/dos/c/usr/js/xsp_internetdistr/Readme.txt
+	@${CP} $(DOCDIR)/Readme.html /mnt/dos/c/usr/js/xsp_internetdistr/Readme.html
+	@${CP} $(ETCDIR)/xspdinstall /mnt/dos/c/usr/js/xsp_internetdistr/xspdinstall
 	@(cd /mnt/dos/c/usr/js/xsp_internetdistr; tar cfbv xspsrc_`date '+%y%m%d'`_tar 20 Readme.txt Readme.html xspdinstall xsp[a-z]*_`date '+%y%m%d'`*.tar; gzip -f xspsrc_`date '+%y%m%d'`_tar && mv xspsrc_`date '+%y%m%d'`_tar.gz xspsrc_`date '+%y%m%d'`_tar.tgz)
 	@rm -f /mnt/dos/c/usr/js/xsp_internetdistr/Readme.txt
 	@rm -f /mnt/dos/c/usr/js/xsp_internetdistr/xspdinstall
-	@echo "distribution file: c:/usr/js/xsp_internetdistr/xspsrc_`date '+%y%m%d'`_tar.tgz"
+	@${ECHO} "distribution file: c:/usr/js/xsp_internetdistr/xspsrc_`date '+%y%m%d'`_tar.tgz"
 	@umount /dev/hda3; sync; sync
 
 ################################################################################
@@ -682,9 +627,9 @@ internet: \
 internet_doc:
 	@(cd $(CDOC_IF_DIR); tar cfbv $(INTERNETDIR)/xspsysdoc_`date '+%y%m%d'`.tar 20 . )
 	@mount /dev/hda3 /mnt/dos/c
-	@mkdir -p /mnt/dos/c/usr/js/xsp_internetdistr
-	@cp $(INTERNETDIR)/xspsysdoc_`date '+%y%m%d'`.tar /mnt/dos/c/usr/js/xsp_internetdistr/xspsysdoc_`date '+%y%m%d'`.tar
-	@echo "distribution file: c:/usr/js/xsp_internetdistr/xspsysdoc_`date '+%y%m%d'`.tar"
+	@${MKDIR} -p /mnt/dos/c/usr/js/xsp_internetdistr
+	@${CP} $(INTERNETDIR)/xspsysdoc_`date '+%y%m%d'`.tar /mnt/dos/c/usr/js/xsp_internetdistr/xspsysdoc_`date '+%y%m%d'`.tar
+	@${ECHO} "distribution file: c:/usr/js/xsp_internetdistr/xspsysdoc_`date '+%y%m%d'`.tar"
 	@umount /dev/hda3; sync; sync
 
 ################################################################################
@@ -700,7 +645,7 @@ cdoc-if:
 		-overview overview.html \
 		-links -desc \
 		-l -e -P -M \
-		`echo " $(CDOC_IF_FILES)" | sed -e "s| $(HOMEDIR)/*| |g"` 
+		`${ECHO} " $(CDOC_IF_FILES)" | sed -e "s| $(HOMEDIR)/*| |g"` 
 
 cdoc-core:
 	$(CDOC) \
@@ -711,29 +656,29 @@ cdoc-core:
 		-overview overview.html \
 		-links -desc \
 		-l -e -M \
-		`echo " $(CDOC_CORE_FILES)" | sed -e "s| $(HOMEDIR)/*| |g"` 
+		`${ECHO} " $(CDOC_CORE_FILES)" | sed -e "s| $(HOMEDIR)/*| |g"` 
 
 ################################################################################
 
 help:
-	@echo "make" >&2
-	@echo "    [default]     - make all compilation, linking and installing" >&2
-	@echo "     all          - make all compilation and linking" >&2
-	@echo "     help         - print this help text" >&2
-	@echo "     install      - make installation to \"$(INSTALLDIR)\"" >&2
-	@echo "     backup       - backup to floppy" >&2
-	@echo "     tarbackup    - build tar backup to \"$(BACKUPDIR)\"" >&2
-	@echo "     diskbackup   - copy all files to \"/mnt/dos/c/usr/js/xsp_backup\"" >&2
-	@echo "     distribution - distribution of tarfiles to floppy" >&2
-	@echo "     internet     - distribution of tarfiles for internet homepage" >&2
-	@echo "     cdoc-if      - XSPD/XSP C interface documentation" >&2
-	@echo "     cdoc-core    - XSPD/XSP core documentation" >&2
-	@echo "     xspapp       - calling the Makefile of \"$(XSPAPPDIR)\"" >&2
-	@echo "     xspjsys      - calling the Makefile of \"$(XSPJAVASYSDIR)\"" >&2
-	@echo "     xspjava      - calling the Makefile of \"$(XSPJAVADIR)\"" >&2
-	@echo "     cvsbuild     - build cvs module at \"$(CVSROOT)\" and backup version $(VERSION)" >&2
-	@echo "     cvsdelta     - checkin new version at via \"$(CVSROOT)\" and backup version $(VERSION)" >&2
-	@echo "" >&2
+	@${ECHO} "make" >&2
+	@${ECHO} "    [default]     - make all compilation, linking and installing" >&2
+	@${ECHO} "     all          - make all compilation and linking" >&2
+	@${ECHO} "     help         - print this help text" >&2
+	@${ECHO} "     install      - make installation to \"$(INSTALLDIR)\"" >&2
+	@${ECHO} "     backup       - backup to floppy" >&2
+	@${ECHO} "     tarbackup    - build tar backup to \"$(BACKUPDIR)\"" >&2
+	@${ECHO} "     diskbackup   - copy all files to \"/mnt/dos/c/usr/js/xsp_backup\"" >&2
+	@${ECHO} "     distribution - distribution of tarfiles to floppy" >&2
+	@${ECHO} "     internet     - distribution of tarfiles for internet homepage" >&2
+	@${ECHO} "     cdoc-if      - XSPD/XSP C interface documentation" >&2
+	@${ECHO} "     cdoc-core    - XSPD/XSP core documentation" >&2
+	@${ECHO} "     xspapp       - calling the Makefile of \"$(XSPAPPDIR)\"" >&2
+	@${ECHO} "     xspjsys      - calling the Makefile of \"$(XSPJAVASYSDIR)\"" >&2
+	@${ECHO} "     xspjava      - calling the Makefile of \"$(XSPJAVADIR)\"" >&2
+	@${ECHO} "     cvsbuild     - build cvs module at \"$(CVSROOT)\" and backup version $(VERSION)" >&2
+	@${ECHO} "     cvsdelta     - checkin new version at via \"$(CVSROOT)\" and backup version $(VERSION)" >&2
+	@${ECHO} "" >&2
 
 ################################################################################
 
@@ -748,8 +693,8 @@ lp:	
 ################################################################################
 
 mkdirs:
-	-@mkdir -p $(TMPDIR) 2>/dev/null
-	-@mkdir -p \
+	-@${MKDIR} -p $(TMPDIR) 2>/dev/null
+	-@${MKDIR} -p \
 	    $(SRCDIR) \
 	    $(LIBDIR) \
 	    $(OBJDIR) \
@@ -768,64 +713,64 @@ mkdirs:
 ### cvs ###
 
 $(CVSMAKEFILE):	$(MAKEFILE)
-	@echo " rebuild makefile $(CVSMAKEFILE)"
-	@echo "### generated cvs makefile for $(MODULE) at `date '+%Y-%m-%d %H:%M:%S'` ###" >$(CVSMAKEFILE)
-	@echo "" >>$(CVSMAKEFILE)
+	@${ECHO} " rebuild makefile $(CVSMAKEFILE)"
+	@${ECHO} "### generated cvs makefile for $(MODULE) at `date '+%Y-%m-%d %H:%M:%S'` ###" >$(CVSMAKEFILE)
+	@${ECHO} "" >>$(CVSMAKEFILE)
 	@for DFIL in $(SCCS_FILES); \
 	    do \
-		SFIL=`echo $$DFIL | sed -e "s%$(HOMEDIR)%$(CVSDIR)/$(CVSMODULE)%" -e "s/$$/,v/"`; \
-		CFIL=`echo $$DFIL | sed -e "s%$(HOMEDIR)%$(CVSMODULE)%"`; \
-		echo "$$DFIL: $$SFIL" >>$(CVSMAKEFILE); \
-		echo "	@(cd ..; cvs checkout $$CFIL)" >>$(CVSMAKEFILE); \
-		echo "" >>$(CVSMAKEFILE); \
+		SFIL=`${ECHO} $$DFIL | sed -e "s%$(HOMEDIR)%$(CVSDIR)/$(CVSMODULE)%" -e "s/$$/,v/"`; \
+		CFIL=`${ECHO} $$DFIL | sed -e "s%$(HOMEDIR)%$(CVSMODULE)%"`; \
+		${ECHO} "$$DFIL: $$SFIL" >>$(CVSMAKEFILE); \
+		${ECHO} "	@(cd ..; cvs checkout $$CFIL)" >>$(CVSMAKEFILE); \
+		${ECHO} "" >>$(CVSMAKEFILE); \
 	    done
-	@echo "cvsall: \\" >>$(CVSMAKEFILE)
+	@${ECHO} "cvsall: \\" >>$(CVSMAKEFILE)
 	@for DFIL in $(SCCS_FILES); \
 	    do \
-	       echo "	$$DFIL \\" >>$(CVSMAKEFILE); \
+	       ${ECHO} "	$$DFIL \\" >>$(CVSMAKEFILE); \
 	    done
-	@echo "" >>$(CVSMAKEFILE)
+	@${ECHO} "" >>$(CVSMAKEFILE)
 
 #-------------------------------------------------------------------------------
 
 mkcvs:
 	@if [ ! -d $(CVSDIR)/$(CVSMODULE) ]; \
 	    then \
-		echo "--- no cvs ---"; \
+		${ECHO} "--- no cvs ---"; \
 	    else \
-		($(MAKE) -f $(CVSMAKEFILE) cvsall || echo "-> error from cvs ignored (try \"(cd $(PWD); $(MAKE) cvsbuild)\")"); \
+		($(MAKE) -f $(CVSMAKEFILE) cvsall || ${ECHO} "-> error from cvs ignored (try \"(cd $(PWD); $(MAKE) cvsbuild)\")"); \
 	    fi
 
 #-------------------------------------------------------------------------------
 
 cvsbuild:
-	@echo " build $(CVSDIR)/$(CVSMODULE)"
+	@${ECHO} " build $(CVSDIR)/$(CVSMODULE)"
 	@xcvs init
 	@unset FLIST; \
 	    for DFIL in $(SCCS_FILES); \
 	    do \
-		FIL=`echo $$DFIL | sed -e "s%$(HOMEDIR)/*%%"`; \
+		FIL=`${ECHO} $$DFIL | sed -e "s%$(HOMEDIR)/*%%"`; \
 		FLIST=$$FLIST$${FLIST:+ }$$FIL; \
 	    done; \
 	    xcvs create $$FLIST
-	@VERS=`echo "$(VERSION)" | sed  -e "s/\./_/g" -e "s/^/V/"`; \
+	@VERS=`${ECHO} "$(VERSION)" | sed  -e "s/\./_/g" -e "s/^/V/"`; \
 	    xcvs tag $$VERS; \
-	    echo " tag set to symbolic version $$VERS"
+	    ${ECHO} " tag set to symbolic version $$VERS"
 	
 #-------------------------------------------------------------------------------
 
 cvsdelta:
-	@echo " delta $(CVSDIR)/$(CVSMODULE)"
+	@${ECHO} " delta $(CVSDIR)/$(CVSMODULE)"
 	@unset FLIST; \
 	    for DFIL in $(SCCS_FILES); \
 	    do \
-		FIL=`echo $$DFIL | sed -e "s%$(HOMEDIR)/*%%"`; \
+		FIL=`${ECHO} $$DFIL | sed -e "s%$(HOMEDIR)/*%%"`; \
 		FLIST=$$FLIST$${FLIST:+ }$$FIL; \
 	    done; \
 	    xcvs delta $$FLIST
-	@VERS=`echo "$(VERSION)" | sed  -e "s/\./_/g" -e "s/^/V/"`; \
+	@VERS=`${ECHO} "$(VERSION)" | sed  -e "s/\./_/g" -e "s/^/V/"`; \
 	    xcvs tag $$VERS; \
-	    echo " tag set to symbolic version $$VERS"
+	    ${ECHO} " tag set to symbolic version $$VERS"
 	
 ################################################################################
 
@@ -863,7 +808,7 @@ $(LIBXSPD):	\
 	$(LIBXSPD)(xspdadmqsort.o) \
 	$(LIBXSPD)(xspdadmchart.o) \
 	$(LIBXSPD)(xspdadm.o)
-	@echo "	$(LIBXSPD) updated"
+	@${ECHO} "	$(LIBXSPD) updated"
 
 ################################################################################
 
@@ -883,11 +828,11 @@ $(LIBCMN):	\
 	$(LIBCMN)(xspappfunc.o) \
 	$(LIBCMN)(xspappif.o) \
 	$(LIBCMN)(xspapp.o)
-	@echo "	$(LIBCMN) updated"
+	@${ECHO} "	$(LIBCMN) updated"
 
 libchart:	\
 	$(LIBCMN)(xspchart.o)
-	@echo "	$(LIBCMN)/xspchart.o updated"
+	@${ECHO} "	$(LIBCMN)/xspchart.o updated"
 
 ################################################################################
 
@@ -898,7 +843,7 @@ $(LIBCMN)(string.o): $(SRCDIR)/string.c 
 	$(INCLCOMMON)/types.h \
 	$(INCLCOMMON)/macros.h \
 	$(INCLCOMMON)/dbg.h
-	@echo "	compiling `basename $% | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -910,7 +855,7 @@ $(LIBCMN)(basename.o): $(SRCDIR)/basenam
 	$(INCLCOMMON)/types.h \
 	$(INCLCOMMON)/macros.h \
 	$(INCLCOMMON)/dbg.h
-	@echo "	compiling `basename $% | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -922,7 +867,7 @@ $(LIBCMN)(misc.o): $(SRCDIR)/misc.c \
 	$(INCLCOMMON)/types.h \
 	$(INCLCOMMON)/macros.h \
 	$(INCLCOMMON)/dbg.h
-	@echo "	compiling `basename $% | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -933,10 +878,10 @@ $(LIBCMN)(misc.o): $(SRCDIR)/misc.c \
 
 $(INCLXSP)/httperr_cb.h: $(INCLXSP)/httperr.hxsp
 	@SRCFIL=$(INCLXSP)/`basename $@ | sed -e 's/_cb//' -e 's/\..*//'`.hxsp ; \
-	DSTFIL=`echo $@ | sed -e 's/\..*//'`.h ; \
+	DSTFIL=`${ECHO} $@ | sed -e 's/\..*//'`.h ; \
 	MSG="(using commbuf)" ; \
 	[ -f $$SRCFIL ] && \
-	echo " preprocessing $$SRCFIL -> $$DSTFIL  $$MSG"; \
+	${ECHO} " preprocessing $$SRCFIL -> $$DSTFIL  $$MSG"; \
 	$(XHTMLPP) \
 		-d1 '<%' -d2 '%>' \
 		-c $(BIT7) -O -zz -cb ocbp \
@@ -954,7 +899,7 @@ $(LIBCMN)(mess.o): $(SRCDIR)/mess.c \
 	$(INCLCOMMON)/errmsg.h \
 	$(INCLXSP)/httperr.h \
 	$(INCLXSP)/httperr_cb.h
-	@echo "	compiling `basename $% | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -967,7 +912,7 @@ $(LIBCMN)(sock.o): $(SRCDIR)/sock.c \
 	$(INCLCOMMON)/macros.h \
 	$(INCLCOMMON)/dbg.h \
 	$(INCL)/xspconfig.h
-	@echo "	compiling `basename $% | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -983,7 +928,7 @@ $(LIBCMN)(comm.o): $(SRCDIR)/comm.c \
 	$(INCLCOMMON)/fileio.h \
 	$(INCL)/xsp.h \
 	$(INCL)/inpwait.h
-	@echo "	compiling `basename $% | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -996,7 +941,7 @@ $(LIBCMN)(commbuf.o): $(SRCDIR)/commbuf.
 	$(INCLCOMMON)/macros.h \
 	$(INCLCOMMON)/dbg.h \
 	$(INCL)/xspconfig.h
-	@echo "	compiling `basename $% | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -1010,7 +955,7 @@ $(LIBCMN)(commbufstuff.o): $(SRCDIR)/com
 	$(INCLCOMMON)/dbg.h \
 	$(INCLCOMMON)/xspmacros.h \
 	$(INCL)/xspconfig.h
-	@echo "	compiling `basename $% | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -1030,7 +975,7 @@ $(LIBCMN)(xspchart.o): $(SRCDIR)/xspchar
 	$(INCLXSP)/httpchart.h \
 	$(INCLXSP)/httpchartdesc.h \
 	$(INCLXSP)/httpchartrefresh.h
-	@echo "	compiling `basename $% | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -1048,7 +993,7 @@ $(LIBCMN)(readcfg.o): $(SRCDIR)/readcfg.
 	$(INCLCOMMON)/vvar.h \
 	$(INCLCOMMON)/fileio.h \
 	$(INCL)/xsp.h
-	@echo "	compiling `basename $% | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -1065,7 +1010,7 @@ $(LIBXSPD)(xspvar.o): $(SRCDIR)/xspvar.c
 	$(INCLCOMMON)/vmem.h \
 	$(INCL)/xsp.h \
 	$(INCLCOMMON)/xspappvar.h
-	@echo "	compiling `basename $% | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -1080,7 +1025,7 @@ $(LIBCMN)(vvar.o): $(SRCDIR)/vvar.c \
 	$(INCL)/xspconfig.h \
 	$(INCLCOMMON)/vmem.h \
 	$(INCLCOMMON)/vvar.h
-	@echo "	compiling `basename $% | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -1094,7 +1039,7 @@ $(LIBCMN)(vmem.o): $(SRCDIR)/vmem.c \
 	$(INCLCOMMON)/dbg.h \
 	$(INCL)/xspconfig.h \
 	$(INCLCOMMON)/vmem.h
-	@echo "	compiling `basename $% | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -1112,7 +1057,7 @@ $(LIBCMN)(xspapp.o): $(SRCDIR)/xspapp.c 
 	$(INCLCOMMON)/vvar.h \
 	$(INCLCOMMON)/xspappvar.h \
 	$(INCLCOMMON)/xspapp.h
-	@echo "	compiling `basename $% | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -1131,7 +1076,7 @@ $(LIBCMN)(xspappfunc.o): $(SRCDIR)/xspap
 	$(INCLCOMMON)/xspappvar.h \
 	$(INCLCOMMON)/xspapp.h \
 	$(INCLXSP)/httperr.h
-	@echo "	compiling `basename $% | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -1149,7 +1094,7 @@ $(LIBCMN)(xspappif.o): $(SRCDIR)/xspappi
 	$(INCLCOMMON)/xspappvar.h \
 	$(INCLCOMMON)/xspapp.h \
 	$(INCLCOMMON)/xspappif.h
-	@echo "	compiling `basename $% | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -1167,7 +1112,7 @@ $(LIBXSPD)(xspdadmqsort.o): $(SRCDIR)/xs
 	$(INCLCOMMON)/vmem.h \
 	$(INCL)/xsp.h \
 	$(INCLCOMMON)/vvar.h
-	@echo "	compiling `basename $% | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -1179,10 +1124,10 @@ $(LIBXSPD)(xspdadmqsort.o): $(SRCDIR)/xs
 
 $(INCLADMXSP)/admchart.h: $(INCLXSP)/httpchart.hxsp
 	@SRCFIL=$(INCLXSP)/`basename $@ | sed -e 's/^adm/http/' -e 's/\..*//'`.hxsp ; \
-	DSTFIL=`echo $@ | sed -e 's/\..*//'`.h ; \
+	DSTFIL=`${ECHO} $@ | sed -e 's/\..*//'`.h ; \
 	MSG="(using commbuf)" ; \
 	[ -f $$SRCFIL ] && \
-	echo " preprocessing $$SRCFIL -> $$DSTFIL  $$MSG"; \
+	${ECHO} " preprocessing $$SRCFIL -> $$DSTFIL  $$MSG"; \
 	$(XHTMLPP) \
 		-d1 '<%' -d2 '%>' \
 		-c $(BIT7) -O -zz -cb ocbp \
@@ -1193,10 +1138,10 @@ $(INCLADMXSP)/admchart.h: $(INCLXSP)/htt
 
 $(INCLADMXSP)/admchartdesc.h: $(INCLXSP)/httpchartdesc.hxsp
 	@SRCFIL=$(INCLXSP)/`basename $@ | sed -e 's/^adm/http/' -e 's/\..*//'`.hxsp ; \
-	DSTFIL=`echo $@ | sed -e 's/\..*//'`.h ; \
+	DSTFIL=`${ECHO} $@ | sed -e 's/\..*//'`.h ; \
 	MSG="(using commbuf)" ; \
 	[ -f $$SRCFIL ] && \
-	echo " preprocessing $$SRCFIL -> $$DSTFIL  $$MSG"; \
+	${ECHO} " preprocessing $$SRCFIL -> $$DSTFIL  $$MSG"; \
 	$(XHTMLPP) \
 		-d1 '<%' -d2 '%>' \
 		-c $(BIT7) -O -zz -cb ocbp \
@@ -1207,10 +1152,10 @@ $(INCLADMXSP)/admchartdesc.h: $(INCLXSP)
 
 $(INCLADMXSP)/admchartrefresh.h: $(INCLXSP)/httpchartrefresh.hxsp
 	@SRCFIL=$(INCLXSP)/`basename $@ | sed -e 's/^adm/http/' -e 's/\..*//'`.hxsp ; \
-	DSTFIL=`echo $@ | sed -e 's/\..*//'`.h ; \
+	DSTFIL=`${ECHO} $@ | sed -e 's/\..*//'`.h ; \
 	MSG="(using commbuf)" ; \
 	[ -f $$SRCFIL ] && \
-	echo " preprocessing $$SRCFIL -> $$DSTFIL  $$MSG"; \
+	${ECHO} " preprocessing $$SRCFIL -> $$DSTFIL  $$MSG"; \
 	$(XHTMLPP) \
 		-d1 '<%' -d2 '%>' \
 		-c $(BIT7) -O -zz -cb ocbp \
@@ -1232,7 +1177,7 @@ $(LIBXSPD)(xspdadmchart.o): $(SRCDIR)/xs
 	$(INCLADMXSP)/admchart.h \
 	$(INCLADMXSP)/admchartdesc.h \
 	$(INCLADMXSP)/admchartrefresh.h
-	@echo "	compiling `basename $% | sed -e 's/\..*//' -e 's/xspdadm/xsp/'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//' -e 's/xspdadm/xsp/'`.c"
 	@$(CC) $(CFLAGS) -DADMCHART -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//' -e 's/xspdadm/xsp/'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -1256,7 +1201,7 @@ $(LIBXSPD)(xspdadm.o): $(SRCDIR)/xspdadm
 	$(INCLCOMMON)/vvar.h \
 	$(INCLCOMMON)/xspchart.h \
 	$(INCLADM_FILES)
-	@echo "	compiling `basename $% | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling `basename $% | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $% | sed -e 's/\..*//'`.c
 	@$(AR) rv $@ $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
 	@rm -f $(OBJDIR)/`basename $% | sed -e 's/\..*//'`.o
@@ -1274,14 +1219,14 @@ $(OBJDIR)/xspfwd.o: $(SRCDIR)/xspfwd.c \
 	$(INCL)/xspconfig.h \
 	$(INCLCOMMON)/fileio.h \
 	$(INCL)/xsp.h
-	@echo "	compiling $(SRCDIR)/`basename $@ | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling $(SRCDIR)/`basename $@ | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $@ | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $@ | sed -e 's/\..*//'`.c
 	
 ################################################################################
 
 $(EXEDIR)/xspfwd: $(LIBCMN) \
 	$(OBJDIR)/xspfwd.o
-	@echo "	linking $@"
+	@${ECHO} "	linking $@"
 	@$(CC) $(CFLAGS) $(CLDFLAGS) \
 		-o $@  $(OBJDIR)/`basename $@ | sed -e 's/\..*//'`.o \
 		$(CLIBS) \
@@ -1290,9 +1235,9 @@ $(EXEDIR)/xspfwd: $(LIBCMN) \
 ################################################################################
 	
 $(XSPDIR)/xspfwd: $(EXEDIR)/xspfwd
-	@cp $(EXEDIR)/xspfwd $(XSPDIR)/xspfwd
+	@${CP} $(EXEDIR)/xspfwd $(XSPDIR)/xspfwd
 	@chmod 1755 $(XSPDIR)/xspfwd
-	@#strip $(XSPDIR)/xspfwd && echo "xspfwd stripped"
+	@#strip $(XSPDIR)/xspfwd && ${ECHO} "xspfwd stripped"
 
 ################################################################################
 
@@ -1314,7 +1259,7 @@ $(OBJDIR)/xspd.o: $(SRCDIR)/xspd.c \
 	$(INCLCOMMON)/clktck.h \
 	$(INCLXSP)/httperr_cb.h \
 	$(INCLCOMMON)/envvar.h
-	@echo "	compiling $(SRCDIR)/`basename $@ | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling $(SRCDIR)/`basename $@ | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $@ | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $@ | sed -e 's/\..*//'`.c
 	
 ################################################################################
@@ -1323,7 +1268,7 @@ $(EXEDIR)/xspd: \
 	$(LIBCMN) \
 	$(LIBXSPD) \
 	$(OBJDIR)/xspd.o
-	@echo "	linking $@"
+	@${ECHO} "	linking $@"
 	@$(CC) $(CFLAGS) $(CLDFLAGS) \
 		-o $@  $(OBJDIR)/`basename $@ | sed -e 's/\..*//'`.o \
 		$(CLIBS) \
@@ -1337,14 +1282,14 @@ $(OBJDIR)/xspanalyze.o: $(SRCDIR)/xspana
 	$(INCLCOMMON)/types.h \
 	$(INCLCOMMON)/macros.h \
 	$(INCLCOMMON)/dbg.h
-	@echo "	compiling $(SRCDIR)/`basename $@ | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling $(SRCDIR)/`basename $@ | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $@ | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $@ | sed -e 's/\..*//'`.c
 	
 ################################################################################
 
 $(EXEDIR)/xspanalyze: $(LIBCMN) \
 	$(OBJDIR)/xspanalyze.o
-	@echo "	linking $@"
+	@${ECHO} "	linking $@"
 	@$(CC) $(CFLAGS) $(CLDFLAGS) \
 		-o $@  $(OBJDIR)/`basename $@ | sed -e 's/\..*//'`.o \
 		$(CLIBS) \
@@ -1353,12 +1298,12 @@ $(EXEDIR)/xspanalyze: $(LIBCMN) \
 ################################################################################
 	
 $(XSPDIR)/xspanalyze: $(EXEDIR)/xspanalyze
-	@cp $(EXEDIR)/xspanalyze $(XSPDIR)/xspanalyze
+	@${CP} $(EXEDIR)/xspanalyze $(XSPDIR)/xspanalyze
 
 ################################################################################
 
 $(XSPDIR)/xspdAdmin.xsp: $(XSPDIR)/xspfwd
-	@echo " install $(XSPDIR)/xspdAdmin.xsp"
+	@${ECHO} " install $(XSPDIR)/xspdAdmin.xsp"
 	@ln -f $(XSPDIR)/xspfwd $(XSPDIR)/xspdAdmin.xsp
 
 ################################################################################
@@ -1376,14 +1321,14 @@ $(OBJDIR)/xspappscript.o: $(SRCDIR)/xspa
 	$(INCLCOMMON)/xspappif.h \
 	$(INCLCOMMON)/xspappvar.h \
 	$(INCLCOMMON)/xspappextern.h
-	@echo "	compiling $(SRCDIR)/`basename $@ | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling $(SRCDIR)/`basename $@ | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -UKERNEL -o $(OBJDIR)/`basename $@ | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $@ | sed -e 's/\..*//'`.c
 	
 ################################################################################
 
 $(EXEDIR)/xspappscript: $(LIBCMN) \
 	$(OBJDIR)/xspappscript.o
-	@echo "	linking $@"
+	@${ECHO} "	linking $@"
 	@$(CC) $(CFLAGS) \
 		$(CLDFLAGS) \
 		-o $@  $(OBJDIR)/`basename $@ | sed -e 's/\..*//'`.o \
@@ -1396,112 +1341,112 @@ $(EXEDIR)/xspappscript: $(LIBCMN) \
 ### install shell script commands, 1st: copy, others link only ###
 
 $(APPUTILDIR)/xspSessionConnect: $(EXEDIR)/xspappscript
-	@echo " install $@ ... with link to other shell scripts"
-	@cp -f $(EXEDIR)/xspappscript $@
+	@${ECHO} " install $@ ... with link to other shell scripts"
+	@${CP} -f $(EXEDIR)/xspappscript $@
 	@chmod 1755 $@
 
 #-------------------------------------------------------------------------------
 
 $(APPUTILDIR)/xspSessionDisconnect: $(APPUTILDIR)/xspSessionConnect
-	@echo " install $@"
+	@${ECHO} " install $@"
 	-@[ "`ls -i $(APPUTILDIR)/xspSessionConnect | sed -e 's/^ *//' -e 's/ .*//'`" != "`ls -i $@ 2>&1 | sed -e 's/^ *//' -e 's/ .*//'`" ] \
 	    && ln -f $(APPUTILDIR)/xspSessionConnect $@
 
 #-------------------------------------------------------------------------------
 
 $(APPUTILDIR)/xspSessionClose: $(APPUTILDIR)/xspSessionConnect
-	@echo " install $@"
+	@${ECHO} " install $@"
 	-@[ "`ls -i $(APPUTILDIR)/xspSessionConnect | sed -e 's/^ *//' -e 's/ .*//'`" != "`ls -i $@ 2>&1 | sed -e 's/^ *//' -e 's/ .*//'`" ] \
 	    && ln -f $(APPUTILDIR)/xspSessionConnect $@
 
 #-------------------------------------------------------------------------------
 
 $(APPUTILDIR)/xspPrVar: $(APPUTILDIR)/xspSessionConnect
-	@echo " install $@"
+	@${ECHO} " install $@"
 	-@[ "`ls -i $(APPUTILDIR)/xspSessionConnect | sed -e 's/^ *//' -e 's/ .*//'`" != "`ls -i $@ 2>&1 | sed -e 's/^ *//' -e 's/ .*//'`" ] \
 	    && ln -f $(APPUTILDIR)/xspSessionConnect $@
 
 #-------------------------------------------------------------------------------
 
 $(APPUTILDIR)/xspGetVar: $(APPUTILDIR)/xspSessionConnect
-	@echo " install $@"
+	@${ECHO} " install $@"
 	-@[ "`ls -i $(APPUTILDIR)/xspSessionConnect | sed -e 's/^ *//' -e 's/ .*//'`" != "`ls -i $@ 2>&1 | sed -e 's/^ *//' -e 's/ .*//'`" ] \
 	    && ln -f $(APPUTILDIR)/xspSessionConnect $@
 
 #-------------------------------------------------------------------------------
 
 $(APPUTILDIR)/xspAssignVar: $(APPUTILDIR)/xspSessionConnect
-	@echo " install $@"
+	@${ECHO} " install $@"
 	-@[ "`ls -i $(APPUTILDIR)/xspSessionConnect | sed -e 's/^ *//' -e 's/ .*//'`" != "`ls -i $@ 2>&1 | sed -e 's/^ *//' -e 's/ .*//'`" ] \
 	    && ln -f $(APPUTILDIR)/xspSessionConnect $@
 
 #-------------------------------------------------------------------------------
 
 $(APPUTILDIR)/xspReleaseVar: $(APPUTILDIR)/xspSessionConnect
-	@echo " install $@"
+	@${ECHO} " install $@"
 	-@[ "`ls -i $(APPUTILDIR)/xspSessionConnect | sed -e 's/^ *//' -e 's/ .*//'`" != "`ls -i $@ 2>&1 | sed -e 's/^ *//' -e 's/ .*//'`" ] \
 	    && ln -f $(APPUTILDIR)/xspSessionConnect $@
 
 #-------------------------------------------------------------------------------
 
 $(APPUTILDIR)/xspGetVarSize: $(APPUTILDIR)/xspSessionConnect
-	@echo " install $@"
+	@${ECHO} " install $@"
 	-@[ "`ls -i $(APPUTILDIR)/xspSessionConnect | sed -e 's/^ *//' -e 's/ .*//'`" != "`ls -i $@ 2>&1 | sed -e 's/^ *//' -e 's/ .*//'`" ] \
 	    && ln -f $(APPUTILDIR)/xspSessionConnect $@
 
 #-------------------------------------------------------------------------------
 
 $(APPUTILDIR)/xspGetVarCnt: $(APPUTILDIR)/xspSessionConnect
-	@echo " install $@"
+	@${ECHO} " install $@"
 	-@[ "`ls -i $(APPUTILDIR)/xspSessionConnect | sed -e 's/^ *//' -e 's/ .*//'`" != "`ls -i $@ 2>&1 | sed -e 's/^ *//' -e 's/ .*//'`" ] \
 	    && ln -f $(APPUTILDIR)/xspSessionConnect $@
 
 #-------------------------------------------------------------------------------
 
 $(APPUTILDIR)/xspInputHttpGet: $(APPUTILDIR)/xspSessionConnect
-	@echo " install $@"
+	@${ECHO} " install $@"
 	-@[ "`ls -i $(APPUTILDIR)/xspSessionConnect | sed -e 's/^ *//' -e 's/ .*//'`" != "`ls -i $@ 2>&1 | sed -e 's/^ *//' -e 's/ .*//'`" ] \
 	    && ln -f $(APPUTILDIR)/xspSessionConnect $@
 
 #-------------------------------------------------------------------------------
 
 $(APPUTILDIR)/xspInputHttpPost: $(APPUTILDIR)/xspSessionConnect
-	@echo " install $@"
+	@${ECHO} " install $@"
 	-@[ "`ls -i $(APPUTILDIR)/xspSessionConnect | sed -e 's/^ *//' -e 's/ .*//'`" != "`ls -i $@ 2>&1 | sed -e 's/^ *//' -e 's/ .*//'`" ] \
 	    && ln -f $(APPUTILDIR)/xspSessionConnect $@
 
 #-------------------------------------------------------------------------------
 
 $(APPUTILDIR)/xspInputHttp: $(APPUTILDIR)/xspSessionConnect
-	@echo " install $@"
+	@${ECHO} " install $@"
 	-@[ "`ls -i $(APPUTILDIR)/xspSessionConnect | sed -e 's/^ *//' -e 's/ .*//'`" != "`ls -i $@ 2>&1 | sed -e 's/^ *//' -e 's/ .*//'`" ] \
 	    && ln -f $(APPUTILDIR)/xspSessionConnect $@
 
 #-------------------------------------------------------------------------------
 
 $(APPUTILDIR)/xspGetSessionId: $(APPUTILDIR)/xspSessionConnect
-	@echo " install $@"
+	@${ECHO} " install $@"
 	-@[ "`ls -i $(APPUTILDIR)/xspSessionConnect | sed -e 's/^ *//' -e 's/ .*//'`" != "`ls -i $@ 2>&1 | sed -e 's/^ *//' -e 's/ .*//'`" ] \
 	    && ln -f $(APPUTILDIR)/xspSessionConnect $@
 
 #-------------------------------------------------------------------------------
 
 $(APPUTILDIR)/xspGetLockTimeout: $(APPUTILDIR)/xspSessionConnect
-	@echo " install $@"
+	@${ECHO} " install $@"
 	-@[ "`ls -i $(APPUTILDIR)/xspSessionConnect | sed -e 's/^ *//' -e 's/ .*//'`" != "`ls -i $@ 2>&1 | sed -e 's/^ *//' -e 's/ .*//'`" ] \
 	    && ln -f $(APPUTILDIR)/xspSessionConnect $@
 
 #-------------------------------------------------------------------------------
 
 $(APPUTILDIR)/xspGetErrno: $(APPUTILDIR)/xspSessionConnect
-	@echo " install $@"
+	@${ECHO} " install $@"
 	-@[ "`ls -i $(APPUTILDIR)/xspSessionConnect | sed -e 's/^ *//' -e 's/ .*//'`" != "`ls -i $@ 2>&1 | sed -e 's/^ *//' -e 's/ .*//'`" ] \
 	    && ln -f $(APPUTILDIR)/xspSessionConnect $@
 
 #-------------------------------------------------------------------------------
 
 $(APPUTILDIR)/xspStuffEncode: $(APPUTILDIR)/xspSessionConnect
-	@echo " install $@"
+	@${ECHO} " install $@"
 	-@[ "`ls -i $(APPUTILDIR)/xspSessionConnect | sed -e 's/^ *//' -e 's/ .*//'`" != "`ls -i $@ 2>&1 | sed -e 's/^ *//' -e 's/ .*//'`" ] \
 	    && ln -f $(APPUTILDIR)/xspSessionConnect $@
 
@@ -1512,14 +1457,14 @@ $(OBJDIR)/selectchk.o: $(SRCDIR)/selectc
 	$(INCLCOMMON)/types.h \
 	$(INCLCOMMON)/macros.h \
 	$(INCLCOMMON)/dbg.h
-	@echo "	compiling $(SRCDIR)/`basename $@ | sed -e 's/\..*//'`.c"
+	@${ECHO} "	compiling $(SRCDIR)/`basename $@ | sed -e 's/\..*//'`.c"
 	@$(CC) $(CFLAGS) -o $(OBJDIR)/`basename $@ | sed -e 's/\..*//'`.o -c $(SRCDIR)/`basename $@ | sed -e 's/\..*//'`.c
 	
 ################################################################################
 
 $(EXEDIR)/selectchk: $(LIBCMN)(mess.o) \
 	$(OBJDIR)/selectchk.o
-	@echo "	linking $@"
+	@${ECHO} "	linking $@"
 	@$(CC) $(CFLAGS) $(CLDFLAGS) \
 		-o $@  $(OBJDIR)/`basename $@ | sed -e 's/\..*//'`.o \
 		$(CLIBS) \
@@ -1529,8 +1474,8 @@ $(EXEDIR)/selectchk: $(LIBCMN)(mess.o) \
 
 $(INCL)/inpwait.h: $(EXEDIR)/selectchk
 	@INPWAIT=`$(EXEDIR)/selectchk -t 1 -c 1`; \
-	    echo "	setting INPWAIT to $$INPWAIT msec at $@"; \
-	    echo "#define INPWAIT $$INPWAIT /* unit for one select() call [msec] */" >$(INCL)/inpwait.h
+	    ${ECHO} "	setting INPWAIT to $$INPWAIT msec at $@"; \
+	    ${ECHO} "#define INPWAIT $$INPWAIT /* unit for one select() call [msec] */" >$(INCL)/inpwait.h
 	
 ################################################################################
 
@@ -1549,7 +1494,7 @@ BEGIN		{ printf("/* general description 
 $(DOCDIR)/_vvar.h: $(INCL)/vvar.h
 	-@if [ -x $(UTILDIR)/mktabs ]; \
 	then \
-	    echo "	prepare no-tab doku $(DOCDIR)/"`basename $@ | sed -e 's/^_//'`; \
+	    ${ECHO} "	prepare no-tab doku $(DOCDIR)/"`basename $@ | sed -e 's/^_//'`; \
 	    $(UTILDIR)/mktabs -r <$(INCL)/`basename $@ | sed -e 's/^_//'` >$(DOCDIR)/`basename $@`; \
 	fi
 	
@@ -1558,7 +1503,7 @@ $(DOCDIR)/_vvar.h: $(INCL)/vvar.h
 $(DOCDIR)/_envvar.h: $(INCL)/envvar.h
 	-@if [ -x $(UTILDIR)/mktabs ]; \
 	then \
-	    echo "	prepare no-tab doku $(DOCDIR)/"`basename $@ | sed -e 's/^_//'`; \
+	    ${ECHO} "	prepare no-tab doku $(DOCDIR)/"`basename $@ | sed -e 's/^_//'`; \
 	    $(UTILDIR)/mktabs -r <$(INCL)/`basename $@ | sed -e 's/^_//'` >$(DOCDIR)/`basename $@`; \
 	fi
 	
@@ -1567,7 +1512,7 @@ $(DOCDIR)/_envvar.h: $(INCL)/envvar.h
 $(DOCDIR)/_xspd.conf: $(ETCDIR)/xspd.conf
 	-@if [ -x $(UTILDIR)/mktabs ]; \
 	then \
-	    echo "	prepare no-tab doku $(DOCDIR)/"`basename $@ | sed -e 's/^_//'`; \
+	    ${ECHO} "	prepare no-tab doku $(DOCDIR)/"`basename $@ | sed -e 's/^_//'`; \
 	    $(UTILDIR)/mktabs -r <$(ETCDIR)/`basename $@ | sed -e 's/^_//'` >$(DOCDIR)/`basename $@`; \
 	fi
 	
@@ -1624,32 +1569,33 @@ $(CONFIGFILE): $(ETCDIR)/xspd.conf_distr
 	 DSTFILE=$@; \
 	 if [ ! -s $@ ] ; \
 	 then \
-	    echo "	process $$SRCFILE to $$DSTFILE (default config file)" ; \
+	    ${ECHO} "dist file is $$DSTFILE" \
+	    ${ECHO} "	process $$SRCFILE to $$DSTFILE (default config file)" ; \
 	    cp /dev/null $$DSTFILE ; \
-	    echo "### generated by $(MAKEFILE) at `date` ###" >>$$DSTFILE ; \
-	    echo "### source file: $$SRCFILE ###" >>$$DSTFILE ; \
-	    echo "### adapt to your own environment ###" >>$$DSTFILE ; \
-	    cp /dev/null $(TMPFILE).confpp ; \
-	    echo "#!/bin/sh" >>$(TMPFILE).confpp ; \
+	    ${ECHO} "### generated by $(MAKEFILE) at `date` ###" >>$$DSTFILE ; \
+	    ${ECHO} "### source file: $$SRCFILE ###" >>$$DSTFILE ; \
+	    ${ECHO} "### adapt to your own environment ###" >>$$DSTFILE ; \
+	    ${CP} /dev/null $(TMPFILE).confpp ; \
+	    ${ECHO} "#!/bin/sh" >>$(TMPFILE).confpp ; \
 	    \
-	    echo "XSPDIR=`(cd $(XSPDIR); pwd)`" >>$(TMPFILE).confpp ; \
-	    echo "XSPAPPDIR=`(cd $(XSPAPPDIR); pwd)`" >>$(TMPFILE).confpp ; \
-	    echo "XSPJAVASYSDIR=`(cd $(XSPJAVASYSDIR); pwd)`" >>$(TMPFILE).confpp ; \
-	    echo "XSPJAVADIR=`(cd $(XSPJAVADIR); pwd)`" >>$(TMPFILE).confpp ; \
-	    echo "APPUTILDIR=`(cd $(APPUTILDIR); pwd)`" >>$(TMPFILE).confpp ; \
-	    echo "TMPDIR=/tmp" >>$(TMPFILE).confpp ; \
+	    ${ECHO} "XSPDIR=`(cd $(XSPDIR); pwd)`" >>$(TMPFILE).confpp ; \
+	    ${ECHO} "XSPAPPDIR=`(cd $(XSPAPPDIR); pwd)`" >>$(TMPFILE).confpp ; \
+	    ${ECHO} "XSPJAVASYSDIR=`(cd $(XSPJAVASYSDIR); pwd)`" >>$(TMPFILE).confpp ; \
+	    ${ECHO} "XSPJAVADIR=`(cd $(XSPJAVADIR); pwd)`" >>$(TMPFILE).confpp ; \
+	    ${ECHO} "APPUTILDIR=`(cd $(APPUTILDIR); pwd)`" >>$(TMPFILE).confpp ; \
+	    ${ECHO} "TMPDIR=/tmp" >>$(TMPFILE).confpp ; \
 	    \
-	    echo "cat <<XXX" >>$(TMPFILE).confpp ; \
+	    ${ECHO} "cat <<XXX" >>$(TMPFILE).confpp ; \
 	    cat $$SRCFILE \
 		| sed -e 's/$$Id/~~Id~~/' \
 		>>$(TMPFILE).confpp ; \
-	    echo "XXX" >>$(TMPFILE).confpp ; \
+	    ${ECHO} "XXX" >>$(TMPFILE).confpp ; \
 	    chmod +x $(TMPFILE).confpp; \
 	    $(TMPFILE).confpp \
 		| sed -e 's/~~Id~~/$$Id/' \
 		>>$$DSTFILE; \
 	 else \
-	    echo "	*** WARNING: no processing $$SRCFILE to $$DSTFILE (do not overwrite old version)" ; \
+	    ${ECHO} "	*** WARNING: no processing $$SRCFILE to $$DSTFILE (do not overwrite old version)" ; \
 	 fi
 	
 ################################################################################
@@ -1657,7 +1603,7 @@ $(CONFIGFILE): $(ETCDIR)/xspd.conf_distr
 ### for backup only ###
 
 $(ETCDIR)/xspd.conf:	$(CONFIGFILE)
-	@cp $(CONFIGFILE) $@
+	@${CP} $(CONFIGFILE) $@
 	
 ################################################################################
 
