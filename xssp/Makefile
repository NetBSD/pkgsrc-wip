# $NetBSD$
#
###########################################################
#                  Generated by fbsd2pkg                  #
#              Fri Nov  2 14:05:12 CDT 2018               #
###########################################################

DISTNAME=	xssp-${PV}
CATEGORIES=	biology
MASTER_SITES=	${MASTER_SITE_GITHUB:=cmbi/}
GITHUB_PROJECT=	xssp
GITHUB_TAG=	${PV}

MAINTAINER=	bacon@NetBSD.org
HOMEPAGE=	https://github.com/cmbi/xssp
COMMENT=	Software for creating DSSP and HSSP files
LICENSE=	gnu-gpl-v3

USE_LANGUAGES=	c c++
USE_TOOLS+=	autoconf automake autoreconf perl
GNU_CONFIGURE=	yes

SUBST_CLASSES+=		tuple
SUBST_STAGE.tuple=	pre-configure
SUBST_SED.tuple+=	-e 's|tr1/tuple.hpp|tuple/tuple.hpp|g'
SUBST_FILES.tuple+=	${WRKSRC}/src/mas.cpp
SUBST_FILES.tuple+=	${WRKSRC}/src/primitives-3d.h

SUBST_CLASSES+=		namespace
SUBST_STAGE.namespace=	pre-configure
SUBST_SED.namespace+=	-e 's|std::tr1|std|g'
SUBST_FILES.namespace+=	${WRKSRC}/src/primitives-3d.cpp
SUBST_FILES.namespace+=	${WRKSRC}/src/structure.h
SUBST_FILES.namespace+=	${WRKSRC}/src/primitives-3d.h
SUBST_FILES.namespace+=	${WRKSRC}/src/structure.cpp
SUBST_FILES.namespace+=	${WRKSRC}/src/dssp.cpp

SUBST_CLASSES+=		cmath
SUBST_STAGE.cmath=	pre-configure
SUBST_SED.cmath+=	-e 's|tr1/cmath.hpp|units/cmath.hpp|g'
SUBST_FILES.cmath+=	${WRKSRC}/src/hssp-nt.cpp

CXXFLAGS+=		-Wno-unused-const-variable
CXXFLAGS+=		-Wno-unknown-pragmas
CXXFLAGS+=		-Wno-error=sign-compare		# Boost header
# Work around "could not find a version of the library" configure error
CONFIGURE_ARGS+=	--with-boost-libdir=${PREFIX}/lib

PV=		3.0.1

pre-configure:
	cd ${WRKSRC} && autoreconf -if

.include "../../wip/libzeep/buildlink3.mk"
.include "../../devel/boost-libs/buildlink3.mk"
.include "../../mk/bsd.pkg.mk"
